{"meta":{"title":"沐雨露の山头","subtitle":"懒若新生","description":"平平淡淡、知冷知热","author":"Mudew","url":"https://Mudew.com"},"pages":[{"title":"friends","date":"2018-06-05T18:53:13.000Z","updated":"2022-01-26T06:44:05.109Z","comments":true,"path":"friends/index.html","permalink":"https://mudew.com/friends/index.html","excerpt":"","text":"PY交易现场 @timeline{ 2020@item{ 4月3日“MikuBlog”https://mikublog.com } @item{ 4月3日“镜态极研”https://kagamiz.com/ } @item{ 4月3日“Dawnnnnn”https://dawnnnnnn.com/ } 2019@item{ 6月6日“疯猫哟”https://www.fcat.me/ } @item{ 6月5日“汤一碗”https://blog.uliuli.fun/ } 2018}"},{"title":"whispering","date":"2018-06-05T18:53:13.000Z","updated":"2022-01-26T06:44:05.109Z","comments":true,"path":"whispering/index.html","permalink":"https://mudew.com/whispering/index.html","excerpt":"","text":"静语 @timeline{ 2019@item{ 6月16日吃不到的醋是酸的。 } @item{ 6月13日热情总会变冷淡,不是每次你回来我都在。 } @item{ 6月11日人一生，人海茫茫里，遇到自己真正喜欢的人真的很不容易。 } 2018}"}],"posts":[{"title":"Git杂项命令合集","slug":"Git杂项命令合集","date":"2022-01-26T04:08:27.000Z","updated":"2022-01-26T06:44:05.109Z","comments":true,"path":"2022/01/26/git-miscellaneous-command-set/","link":"","permalink":"https://mudew.com/2022/01/26/git-miscellaneous-command-set/","excerpt":"","text":"前言记录Git杂项命令合集 删除远程分支1$ git push origin --delete [branchname] 删除本地已合并的分支12$ git branch -d [branchname]$ git branch -D [branchName] 删除所有本地TAG1$ git tag -l | xargs git tag -d 删除远程本地TAG 注意Windows平台可能需要用git-bash执行 1$ git show-ref --tag | awk '&#123;print \":\" $2&#125;' | xargs git push origin 新建空白分支123$ git checkout --orphan newbranch$ git rm -rf .$ git commit --allow-empty -m \"[empty|rm] initial commit\" 强制拉取并覆盖本地代码123$ git fetch --all$ git reset --hard origin/master$ git pull 加速克隆及下载镜像123456# https://doc.fastgit.org/# https://gitclone.com/# https://github.com.cnpmjs.org/# https://ghproxy.com/# 免替换$ git config --global url.\"https://hub.fastgit.org\".insteadOf https://github.com 设置代理1234567891011121314# 全局项目$ git config --global http.proxy 127.0.0.1:1080$ git config --global https.proxy 127.0.0.1:1080# 单独项目$ git config --local http.proxy 127.0.0.1:1080$ git config --local https.proxy 127.0.0.1:1080# 清除$ git config --global --unset http.proxy$ git config --global --unset https.proxy# 针对 github.com 的单独配置$ git config --global http.https://github.com.proxy socks5://127.0.0.1:1080$ git config --global https.https://github.com.proxy socks5://127.0.0.1:1080$ git config --global --unset http.https://github.com.proxy$ git config --global --unset https.https://github.com.proxy 查看配置12345678# 查看所有配置$ git config -l# 查看用户配置$ git config --global -l # 查看系统配置$ git config --system -l # 查看仓库配置$ git config --local -l 存储用户名和密码12345# 缓存时间 默认15分钟 --timeout 自定义时间$ git config --global credential.helper cache$ git config --global credential.helper 'cache --timeout 3600'# 永久存储$ git config --global credential.helper store 提交Commit关联Issue123# 操作 fixes fixed fix closes close closed$ git commit -m \"... &#123;action&#125; #&#123;issue_id&#125;\"$ git commit -m \"... fixed #1024\" 清空commit记录1$ git rebase --root -i 提交大型文件(lfs) Git LFS 是 Github 开发的一个 Git 的扩展，用于实现 Git 对大文件的支持 安装LFSLinux123$ curl -s https://packagecloud.io/install/repositories/github/git-lfs/script.deb.sh | sudo bash$ sudo apt-get install git-lfs$ git lfs install Mac(HomeBrew)123$ /usr/bin/ruby -e \"$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)\"$ brew install git-lfs$ git lfs install WindowsWindows Installer 12# 下载安装上述链接的文件后执行命令$ git lfs install 使用 使用前需要git lfs install开启功能 123456789101112# 大文件追踪$ git lfs track \"your_large_file\"# 会生成大文件夹追踪记录，并添加提交$ git add .gitattributes$ git add your_large_file$ git commit -m \"Add large file\"$ git push origin master# 追踪记录$ git lfs ls-files# 可选clone方式$ git lfs clone END.","categories":[],"tags":[{"name":"git","slug":"git","permalink":"https://mudew.com/tags/git/"}]},{"title":"安卓设备逆向分析字段指南","slug":"安卓设备逆向分析字段指南","date":"2022-01-21T06:14:14.000Z","updated":"2022-01-26T06:44:05.109Z","comments":true,"path":"2022/01/21/android-device-reverse-analysis-field-guide/","link":"","permalink":"https://mudew.com/2022/01/21/android-device-reverse-analysis-field-guide/","excerpt":"","text":"前言安卓逆向分析中，一些必要清楚的字段。 正文 字段 描述 组成 重复性 备注 Android ID 安卓设备出厂生成的唯一设备ID 16 位字符串 理论上有 36的16次方种组合，不易出现重复 ROOT、刷机、恢复出厂设置时会被重置 OAID 移动安全联盟推出的匿名设备标识符 32 位字符 不易出现重复 可手动重置、可恢复出厂设置重置 、Android 10以上可获取 IMEI 国际移动设备识别码 15 位数字 不易出现重复 恢复出厂设置不会重置、但可软件伪造、Android 10以上不支持获取 Mac 设备唯一网络标识、全球唯一识别码、各厂商区别划分 48 位二进制数 理论上有 2 ^ 48(281474976710656) 次方种组合，不易出现重复 恢复出厂设置不会重置、但可软件伪造 Serial Android 序列号(硬件) 16 位字母字符串 不易出现重复 与硬件信息同步 DrmID(Media) MediaDrm保护版权唯一ID 长度根据各类算法不定长 不易出现重复 恢复出厂设置大概率不会被重置 UUID 随机序列码 32位 16 进制字符 不易出现重复 随机性较强、不易校验 Band 基带相关信息 根据各个OS不定长 随硬件变化 无 Brand 硬件手机品牌 根据各个品牌不定长 随品牌变化 无 Model 品牌下的细分型号 根据各个品牌不定长 随品牌变化 无 Manufacture 制造厂商 根据各个品牌不定长 随品牌变化 无 Boot 上次开机到当前时间 Unix 时间戳(毫秒) 随用户使用时长变化 无 DeviceId 设备的唯一ID 不定长字符串 可能为IMEI、 MEID 或 ESN 随手机环境变化 无 Sim Serial Sim 卡的序列号 无 无 装有 Sim 卡时可用 END.","categories":[],"tags":[{"name":"Android","slug":"Android","permalink":"https://mudew.com/tags/Android/"},{"name":"Reverse","slug":"Reverse","permalink":"https://mudew.com/tags/Reverse/"}]},{"title":"获取基于OpenWrite的博文密码","slug":"获取基于OpenWrite的博客文章密码","date":"2022-01-14T06:14:14.000Z","updated":"2022-01-26T06:44:05.109Z","comments":true,"path":"2022/01/14/get-openwrite-based-blog-password/","link":"","permalink":"https://mudew.com/2022/01/14/get-openwrite-based-blog-password/","excerpt":"","text":"前言一些博文阅读到一半的时候，会有个阅读全文的按钮。点击后需要你关注公众号，获取密码或暗号或验证码。本文只针对 该工具由 openwrite.cn 免费提供相关的关键字。 正文 右键查看网页源代码, 搜索blogId关键字。 获取到类似1234-1612312341234-123的值。 对接到以下请求进行获取即可。 12345# 格式https:&#x2F;&#x2F;my.openwrite.cn&#x2F;code&#x2F;generate?blogId&#x3D;&#123;blogId&#125;# 例子https:&#x2F;&#x2F;my.openwrite.cn&#x2F;code&#x2F;generate?blogId&#x3D;1234-1612312341234-123 END.","categories":[],"tags":[{"name":"blog","slug":"blog","permalink":"https://mudew.com/tags/blog/"},{"name":"OpenWrite","slug":"OpenWrite","permalink":"https://mudew.com/tags/OpenWrite/"}]},{"title":"树莓派4B随记","slug":"树莓派4B随记","date":"2022-01-14T06:08:27.000Z","updated":"2022-01-26T06:44:05.109Z","comments":true,"path":"2022/01/14/raspberry-pie-4b-notes/","link":"","permalink":"https://mudew.com/2022/01/14/raspberry-pie-4b-notes/","excerpt":"","text":"前言记录一些树莓派4B的记录，使用的是树莓派爱好者基地64位系统2.0正式版(Debian)的系统。 工具记录 Raspberry Pi OS SDFormatter win32diskimager www.advanced-ip-scanner Debian-Pi-Aarch64 balenaEtcher 基础设置开启SSH1$ new-item ssh -type file 配置wifi连接文件1$ vim wpa_supplicant.conf 1234567891011121314151617181920212223country&#x3D;CNctrl_interface&#x3D;DIR&#x3D;&#x2F;var&#x2F;run&#x2F;wpa_supplicant GROUP&#x3D;netdevupdate_config&#x3D;1 network&#x3D;&#123;ssid&#x3D;&quot;909&quot;psk&#x3D;&quot;1393877285&quot;key_mgmt&#x3D;WPA-PSKpriority&#x3D;1&#125; network&#x3D;&#123;ssid&#x3D;&quot;WiFi-B&quot;psk&#x3D;&quot;12345678&quot;key_mgmt&#x3D;WPA-PSKpriority&#x3D;2scan_ssid&#x3D;1&#125;#ssid:网络的ssid#psk:密码#priority:连接优先级，数字越大优先级越高（不可以是负数）#scan_ssid:连接隐藏WiFi时需要指定该值为1 编译安装python3.9.9更新系统12$ sudo apt update$ sudo apt upgrade 安装环境依赖1$ sudo apt install build-essential libsqlite3-dev sqlite3 bzip2 libbz2-dev libffi-dev -y 注意如果没安装libffi-dev的话可能会出现ModuleNotFoundError: No module named &#39;_ctypes&#39;错误 下载&amp;解压123$ wget https://npm.taobao.org/mirrors/python/3.9.9/Python-3.9.9.tgz$ tar zxvf Python-3.9.9.tgz$ cd Python-3.9.9 编译安装123456# --enable-optimizations(优化参数 自选)$ sudo ./configure --enable-optimizations$ sudo make $ sudo make install# 等待完成检查$ ls -al /usr/local/bin/python* 添加PIP alias1alias pq3.9='sudo pip3.9 install -i http://mirrors.aliyun.com/pypi/simple/ --trusted-host mirrors.aliyun.com' 替换默认Python123$ sudo rm /usr/bin/python$ sudo ln -s /usr/bin/python3.9 /usr/bin/python$ python 安装oh-my-zsh12345$ sh -c \"$(curl -fsSL https://ghproxy.com/https://raw.github.com/ohmyzsh/ohmyzsh/master/tools/install.sh)\"$ git clone https://ghproxy.com/https://github.com/zsh-users/zsh-syntax-highlighting.git $&#123;ZSH_CUSTOM:-~/.oh-my-zsh/custom&#125;/plugins/zsh-syntax-highlighting$ git clone https://ghproxy.com/https://github.com/zsh-users/zsh-autosuggestions $&#123;ZSH_CUSTOM:-~/.oh-my-zsh/custom&#125;/plugins/zsh-autosuggestions$ git clone https://ghproxy.com/https://github.com/zsh-users/zsh-completions $&#123;ZSH_CUSTOM:=~/.oh-my-zsh/custom&#125;/plugins/zsh-completions$ git clone https://ghproxy.com/https://github.com/dracula/zsh.git $&#123;ZSH_CUSTOM:=~/.oh-my-zsh/themes/ 结束End","categories":[],"tags":[{"name":"树莓派","slug":"树莓派","permalink":"https://mudew.com/tags/%E6%A0%91%E8%8E%93%E6%B4%BE/"},{"name":"4b","slug":"4b","permalink":"https://mudew.com/tags/4b/"}]},{"title":"小米AX9000折腾记录","slug":"小米AX9000折腾记录","date":"2021-11-23T04:08:27.000Z","updated":"2022-01-26T06:44:05.109Z","comments":true,"path":"2021/11/23/millet-ax9000-toss-record/","link":"","permalink":"https://mudew.com/2021/11/23/millet-ax9000-toss-record/","excerpt":"","text":"前言小米AX9000折腾记录, 官方固件版本为AX9000 1.0.108.bin不是全量文章，整合流程，挑出部分重点，防止重复踩坑。 正文通过虚拟机开启AX9000的SSH123456789101112131415161718192021222324252627# 比较重点的一个脚本 下面会用到# /usr/lib/lua/luci/controller/admin/xqsystem.luamodule(\"luci.controller.admin.xqsystem\", package.seeall)function index() local page = node(\"api\") page.target = firstchild() page.title = (\"\") page.order = 100 page.index = true page = node(\"api\",\"xqsystem\") page.target = firstchild() page.title = (\"\") page.order = 100 page.index = true entry(&#123;\"api\", \"xqsystem\", \"token\"&#125;, call(\"getToken\"), (\"\"), 103, 0x08)endlocal LuciHttp = require(\"luci.http\")function getToken() local result = &#123;&#125; result[\"code\"] = 0 result[\"token\"] = \"; nvram set ssh_en=1; nvram set uart_en=1; nvram set boot_wait=on; nvram commit; uci set wireless.@wifi-iface[0].key=\\`mkxqimage -I\\`; uci commit; sed -i 's/channel=.*/channel=\\\"debug\\\"/g' /etc/init.d/dropbear; /etc/init.d/dropbear start;\" LuciHttp.write_json(result)end 重点是将OPENWRT路由器ip设置为169.254.31.1, 然后关闭DHCP。不然会出现各式报错。 AX9000和AX6000获取SSH的方法 重点是热点改成OpenWrt，密码12345678。以及热点网络适配器去掉ipv4的勾选项目。 0成本用Win10热点和openwrt的vm虚拟机开启AX6000和AX9000的ssh 重点是 wireless-ax9000.sh,也可以手动写入最上面的代码块。 小米 AX9000 解锁 SSH 安装 ShellClash 教程 123456# 注意URL的参数，按实际情况替换。# 05f18fc74244d28dea39a5b537765e92要替换成自己的# 如果ssid不是OpenWrt 或者密码不为12345678 也需要替换测试: http:&#x2F;&#x2F;192.168.1.1&#x2F;cgi-bin&#x2F;luci&#x2F;api&#x2F;xqsystem&#x2F;token测试: http:&#x2F;&#x2F;192.168.31.1&#x2F;cgi-bin&#x2F;luci&#x2F;;stok&#x3D;05f18fc74244d28dea39a5b537765e92&#x2F;api&#x2F;xqsystem&#x2F;tokenhttp:&#x2F;&#x2F;192.168.31.1&#x2F;cgi-bin&#x2F;luci&#x2F;;stok&#x3D;05f18fc74244d28dea39a5b537765e92&#x2F;api&#x2F;xqsystem&#x2F;extendwifi_connect_inited_router?ssid&#x3D;OpenWrt&amp;password&#x3D;12345678&amp;encryption&#x3D;WPA2PSKenctype&#x3D;CCMP&amp;channel&#x3D;11&amp;band&#x3D;2g&amp;admin_username&#x3D;root&amp;admin_password&#x3D;admin&amp;admin_nonce&#x3D;xxx 虚拟机搭建OpenWrt 将OPENWRT路由器ip设置为169.254.31.1 关闭OpenWrt的DHCP 使用wireless-ax9000.sh 或者 手动写入代码块 xqsystem.lua 成功后再次打开路由器后台查看 5G 频段 Wi-Fi 密码，这个 Wi-Fi 密码就是我们默认的 ssh 密码， 以上最好是都在2.4G频段进行。几个教程需要搭配使用，看重点，可以多阅读几遍。 永久获取SSH权限(固化SSH) 请注意有变砖风险，可以跳过这部分。 项目地址 paldier/ax3600_tool 12345678910111213141516# 提前备份(最好下载保存)$ nanddump -f /tmp/bdata_mtd9.img /dev/mtd9# 将项目文件传到/tmp目录 给权限$ chmod +x /tmp/mitool*# 解锁分区锁$ /tmp/mitool.sh unlock# 自动重启并重新锁定分区锁$ /tmp/mitool.sh hack# 显示密码$ /tmp/mitool.sh password# 显示SN$ /tmp/mitool.sh sn# 如升级后ssh被禁用可以用telnet登录$ sed -i 's/channel=.*/channel=\"debug\"/g' /etc/init.d/dropbear$ /etc/init.d/dropbear start# 至此基本可以保证机器长期拥有root权限 参考教程:小米ax3600/ax6000/ax9000/ax5/ax6获取root权限ax9000永久获取ssh权限 刷QSDK&amp;&amp;OpenWrt的方法1234567891011121314151617181920212223242526272829# 1.这一部是设置env保证小米固件在分区rootfs里，为下一部把qsdk刷到rootfs_1做准备$ nvram set flag_last_success=0$ nvram set flag_boot_rootfs=0$ nvram set flag_try_sys1_failed=0$ nvram set flag_try_sys2_failed=0$ nvram commit$ reboot# 2.小米原版固件下ssh命令写入qsdk固件，把固件上传到/tmp目录$ . /lib/upgrade/platform.sh$ switch_layout linux$ ubiformat /dev/mtd22 -y -f /tmp/openwrt-ipq807x-generic-xiaomi_ax9000-squashfs-nand-factory.bin$ nvram set flag_last_success=1$ nvram set flag_boot_rootfs=1$ nvram commit$ reboot# 这里刷固件就结束了，以下是切换分区。# 3.QSDK固件下恢复到原版固件$ fw_setenv flag_last_success 0$ fw_setenv flag_boot_rootfs 0$ reboot# 4.原版固件恢复到QSDK固件$ nvram set flag_last_success=1$ nvram set flag_boot_rootfs=1$ nvram commit$ reboot 这里刷完是两个分区，可以官方固件和openwrt来回切换。注意如果要重新刷，需要先执行3到原版固件，再执行2写入固件。 参考教程: 小米ax9000刷qsdk,openwrt的方法 小米红米路由器AX6刷第三方openwrt固件 第三方固件地址 【Openwrt开发版每周五更新】新版AX6/AX3600/AX9000(QSDK),NSS,组网,jd,多播,小猫咪 开发版 jingleijack/Openwrt_Beta 小米 AX9000 OpenWrt R21.7.1.10 最新源码、V兔出国海淘海淘、clash、打倒美帝、JD. AdGuardHome AdGuardHome去广告和DNS正确姿势 AdGuard Home设置指南 openwrt插件 AdGuardHome学习与分享 AdGuard Home正确使用姿势/去广告/防污/加速解析 121. AdGuardHome管理面板账号密码 root-admin 或者root-password2. 挂载U盘到/overlayAX9000默认的分区大小不足以正常使用软件，所以需要挂载U盘扩容空间请注意要提前把U盘格式化成ext4 12345678910111213141516171819202122232425262728293031323334# 检测U盘是否插入$ cat /proc/scsi/usb-storage/0# 写入以下代码块$ vim /etc/init.d/miwifi_overlay # 这里使用AX6的一段代码来挂载overlay #!/bin/sh /etc/rc.commonSTART=00. /lib/functions/preinit.shstart() &#123; [ -e /data/overlay ] || mkdir /data/overlay [ -e /data/overlay/upper ] || mkdir /data/overlay/upper [ -e /data/overlay/work ] || mkdir /data/overlay/work mount --bind /data/overlay /overlay fopivot /overlay/upper /overlay/work /rom 1 #Fixup miwifi misc, and DO NOT use /overlay/upper/etc instead, /etc/uci-defaults/* may be already removed /bin/mount -o noatime,move /rom/data /data 2&gt;&amp;- /bin/mount -o noatime,move /rom/etc /etc 2&gt;&amp;- /bin/mount -o noatime,move /rom/ini /ini 2&gt;&amp;- /bin/mount -o noatime,move /rom/userdisk /userdisk 2&gt;&amp;- return 0&#125;# 给权限$ chmod 755 /etc/init.d/miwifi_overlay$ /etc/init.d/miwifi_overlay enable$ sync $ reboot 重启后浏览器登录luci界面，点击系统-&gt;挂载点。在挂载点的下方点击修改按钮。 挂载点选择作为外部overlay使用(/overlay)(不要选择其他选项)，点击保存，再点击保存&amp;应用。 在命令行输入reboot执行路由器重启。重启后路由器可能会恢复出厂设置。 重启后打开系统-&gt;软件包，可以看见空闲空间已经变大。 挂载完成，这里参考了OpenWrt挂载U盘OPENWRT | ESXI 下 OpenWrt扩容Overlay,增加安装插件空间 解决OpenWRT安装第三方包错误1234root@OpenWrt:~# opkg print-architecturearch all 1arch noarch 1arch aarch64_cortex-a53_neon-vfpv4 10 把返回的回显复制到opkg的设置里倒数第二行加一行，修改后如下 12345root@OpenWrt:~# opkg print-architecturearch all 1arch noarch 1arch aarch64_cortex-a53 8arch aarch64_cortex-a53_neon-vfpv4 10 但是因为ipq807x并没有适配，所以一些包最好是手动下载安装，手动安装依赖。 换国内源123456# 注意 19.07-SNAPSHOThttps:&#x2F;&#x2F;mirrors.tuna.tsinghua.edu.cn&#x2F;openwrt&#x2F;releases&#x2F;19.07-SNAPSHOT&#x2F;packages&#x2F;# 注意 ipq807xhttps:&#x2F;&#x2F;mirrors.tuna.tsinghua.edu.cn&#x2F;openwrt&#x2F;releases&#x2F;19.07-SNAPSHOT&#x2F;targets&#x2F;ipq807x&#x2F;# 注意 aarch64_cortex-a53https:&#x2F;&#x2F;mirrors.tuna.tsinghua.edu.cn&#x2F;openwrt&#x2F;releases&#x2F;19.07-SNAPSHOT&#x2F;packages&#x2F;aarch64_cortex-a53&#x2F; 额外的插件 解锁网易云灰色歌曲 UnblockNeteaseMusic luci-app-unblockmusic（二次修改） UnblockNeteaseMusic(在用) sirpdboy-package 安装额外软件 Python3 1234567# 软件包界面手动安装或者命令# Python$ opkg install python3$ opkg install python3-pip# gcc$ opkg install gcc automake autoconf libtool make Nodejs 别名12# 或者写入/etc/profile$ alias pq3='pip3 install -i https://pypi.tuna.tsinghua.edu.cn/simple $1' 额外命令123456789# 安装用户相关$ opkg install shadow-groupadd shadow-groupdel shadow-useradd shadow-userdel shadow-usermod# 添加普通用户并且设置密码$ echo \"testuser:*:1000:65534:testuser:/tmp:/bin/ash\" &gt;&gt; /etc/passwd$ passwd testuser# 删除用户$ userdel -r testuser 安装libcap*安装libcap libcap-bin, 因为新版本变成了libcap-ng libcap-ng-bin 12345678910# 手动https://downloads.openwrt.org/snapshots/packages/aarch64_cortex-a53/base/libcap_2.51-1_aarch64_cortex-a53.ipkhttps://downloads.openwrt.org/snapshots/packages/aarch64_cortex-a53/base/libcap-bin_2.51-1_aarch64_cortex-a53.ipk# 修改下快照源，替换自己架构$ src/gz snapshots https://downloads.openwrt.org/snapshots/packages/&#123;architecture&#125;/base# $ opkg update$ opkg install libcap libcap-bin --force-depends AX9000(开发版)1.0.140 挂载/overlay给U盘分区，ext4格式。分两个或者多个以上，第一个分区要大，给Docker用的 ,第二个分区给/overlay。 注意要关闭docker 1234567# 查看挂载的U盘分区$ df -h/dev/sda1 55.0G 4.7G 47.5G 9% /extdisks/sda1/dev/sda1 55.0G 4.7G 47.5G 9% /mnt/docker_disk/dev/sda2 2.5G 43.6M 2.3G 2% /extdisks/sda2/dev/sda1 55.0G 4.7G 47.5G 9% /mnt/docker_disk/mi_docker/lib/docker 把分区好挂载到mount /sda3 1234# 如果报错不存在文件夹 可能需要手动创建/mnt/sda2$ mount /dev/sda2 /mnt/sda2# 如果上面报错 使用这个$ mount -o rw /dev/sda2 /mnt/sda2 挂载检测是否完成 1$ ls /mnt/sda2 迁移Overly 123$ cd /overlay$ cp -r /overlay/* /mnt/sda2$ ls /mnt/sda2 设置开机自动挂载123456# /etc/rc.localecho 1 &gt; /sys/fs/cgroup/memory/memory.use_hierarchy#添加以下这句挂载命令mount /dev/sda2 /overlay exit 0 AX9000(开发版)1.0.140 Docker创建macvlan(这个版本暂时不支持)12345678# 开启网卡混杂模式$ ip link set br-lan promisc on$ docker network create -d macvlan \\ --subnet=192.168.31.0/24 --gateway=192.168.31.1 \\ -o parent=br-lan \\ -o macvlan_mode=bridge \\ macnet AX9000(开发版)1.0.140 Docker安装使用AdGuard HomeAX9000 Docker介绍 以下大部分bash命令需要在ssh里操作 Docker国内镜像源 名称 路径 网易 http://hub-mirror.c.163.com 中国官方镜像 https://registry.docker-cn.com 中国科技大学 https://docker.mirrors.ustc.edu.cn 阿里云镜像 https://[xxx].mirror.aliyuncs.com 拉取镜像12345# Portainer UI界面 搜索并拉取adguard/adguardhome# 命令行$ docker pull adguard/adguardhome 部署镜像 Name, 随意 Image, adguard/adguardhome Always pull the image, 可以关掉 Volumes, 设置挂载目录持久化(可选) e.g /root/workspace/adguard/workdir:/opt/adguardhome/work /root/workspace/adguard/confdir:/opt/adguardhome/conf Publish all exposed network ports to random host ports, (随机暴露端口)打开 Manual network port publishing, 手动添加 5553:53 tcp|5553:53 udp|3000:3000 tcp Network, bridge Restart policy, Always 等待部署完成, 设置地址访问192.168.31.1:3000, 根据需求设置(可百度设置教程)。 汉化Portainer1234567$ cd /tmp$ curl -sL https://ghproxy.com/https://github.com/eysp/public/archive/public.tar.gz | tar xz$ rm -rf public$ mv public-public public$ docker stop portainer$ docker cp public portainer:/$ docker start portainer 刷新页面即可 Dnsmasq转发到AdgHome1234567# vim /etc/dnsmasq.conf 最后添加# port=53server=127.0.0.1#5553 server=192.168.31.1#5553no-resolv dns-forward-max=100000 重启后即可使用AdgHome，注意这里使用的是转发，所以Adg里的客户端显示的都是本地地址。不要尝试使用Adg的53端口来替换dnsmasq的53，会有大问题。也不要尝试再DCHP里设置DNS，会有大问题。 备份AdGuardHome.yaml仅供参考 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256257258259260261262263264265266267268269270271272273274275276277278279280281282283284285286287288289290291292bind_host: 0.0.0.0bind_port: 3000beta_bind_port: 0users: - name: root password: $2y$10$FfeQavihMUiXCuJhHuQwy.6EOXDvkXb/S50qI5fXizqarNT/ShhQmauth_attempts: 5block_auth_min: 15http_proxy: \"\"language: \"\"rlimit_nofile: 0debug_pprof: falseweb_session_ttl: 720dns: bind_hosts: - 0.0.0.0 port: 5553 statistics_interval: 7 querylog_enabled: true querylog_file_enabled: true querylog_interval: 1 querylog_size_memory: 1000 anonymize_client_ip: false protection_enabled: true blocking_mode: nxdomain blocking_ipv4: \"\" blocking_ipv6: \"\" blocked_response_ttl: 10 parental_block_host: family-block.dns.adguard.com safebrowsing_block_host: standard-block.dns.adguard.com ratelimit: 0 ratelimit_whitelist: [ ] refuse_any: false upstream_dns: - 221.7.92.98 - 221.5.203.98 - 114.114.114.114 - 223.5.5.5 - 114.114.115.115 - 119.29.29.29 - 8.8.8.8 - 1.1.1.1 - 2408:8663::2 - 2408:8662::2 - https://dns.alidns.com/dns-query - https://doh.pub/dns-query - https://doh.360.cn/dns-query - https://doh.pub/dns-query - https://dns.google/dns-query - https://dns.adguard.com/dns-query - https://dns.quad9.net/dns-query upstream_dns_file: \"\" bootstrap_dns: - 221.7.92.98 - 221.5.203.98 - 2408:8663::2 - 2408:8662::2 - 114.114.114.114 - 223.5.5.5 - 119.29.29.29 - 1.1.1.1 - 8.8.8.8 all_servers: true fastest_addr: false allowed_clients: [ ] disallowed_clients: [ ] blocked_hosts: - version.bind - id.server - hostname.bind cache_size: 4194304 cache_ttl_min: 0 cache_ttl_max: 0 bogus_nxdomain: [ ] aaaa_disabled: false enable_dnssec: false edns_client_subnet: false max_goroutines: 300 ipset: [ ] filtering_enabled: true filters_update_interval: 24 parental_enabled: false safesearch_enabled: false safebrowsing_enabled: false safebrowsing_cache_size: 1048576 safesearch_cache_size: 1048576 parental_cache_size: 1048576 cache_time: 30 rewrites: [ ] blocked_services: [ ] local_domain_name: lan resolve_clients: true local_ptr_upstreams: [ ]tls: enabled: false server_name: \"\" force_https: false port_https: 443 port_dns_over_tls: 853 port_dns_over_quic: 784 port_dnscrypt: 0 dnscrypt_config_file: \"\" allow_unencrypted_doh: false strict_sni_check: false certificate_chain: \"\" private_key: \"\" certificate_path: \"\" private_key_path: \"\"filters: - enabled: true url: https://adguardteam.github.io/AdGuardSDNSFilter/Filters/filter.txt name: AdGuard Simplified Domain Names filter id: 1 - enabled: false url: https://adaway.org/hosts.txt name: AdAway id: 2 - enabled: false url: https://hosts-file.net/ad_servers.txt name: hpHosts - Ad and Tracking servers only id: 3 - enabled: false url: https://www.malwaredomainlist.com/hostslist/hosts.txt name: MalwareDomainList.com Hosts List id: 4 - enabled: false url: https://raw.githubusercontent.com/vokins/yhosts/master/data/tvbox.txt name: tvbox id: 1575018007 - enabled: false url: https://cdn.jsdelivr.net/gh/neoFelhz/neohosts@gh-pages/full/hosts.txt name: neoHosts full id: 1575618240 - enabled: false url: https://hosts.nfz.moe/basic/hosts name: neoHosts basic id: 1575618241 - enabled: false url: http://sbc.io/hosts/hosts name: StevenBlack host basic id: 1575618242 - enabled: false url: http://sbc.io/hosts/alternates/fakenews-gambling-porn-social/hosts name: StevenBlack host+fakenews + gambling + porn + social id: 1575618243 - enabled: true url: https://anti-ad.net/easylist.txt name: anti-AD 命中率高、兼容性强 id: 1632419612 - enabled: true url: https://gitee.com/halflife/list/raw/master/ad.txt name: halflife合并乘风 id: 1632419613 - enabled: true url: https://banbendalao.coding.net/p/adgk/d/ADgk/git/raw/master/ADgk.txt name: adgk手机去广告规则 id: 1632419619 - enabled: true url: https://cdn.jsdelivr.net/gh/zsakvo/AdGuard-Custom-Rule@master/rule/zhihu.txt name: Zhihu App 广告屏蔽 id: 1632824652 - enabled: true url: https://www.i-dont-care-about-cookies.eu/abp name: I don't care about cookies id: 1636012831 - enabled: true url: https://cdn.jsdelivr.net/gh/Goooler/1024_hosts@master/hosts name: 1024_hosts id: 1636012832 - enabled: true url: https://cdn.jsdelivr.net/gh/jdlingyu/ad-wars@master/hosts name: 大圣净化 id: 1636012833 - enabled: true url: https://cdn.jsdelivr.net/gh/cjx82630/cjxlist@master/cjx-annoyance.txt name: CJX's Annoyance List id: 1636012834 - enabled: true url: https://cdn.jsdelivr.net/gh/Moexin/AdGuardHome/AdGuardHome.list name: AdGuardHome.list id: 1636012836 - enabled: true url: https://cdn.jsdelivr.net/gh/Moexin/AdGuardHome/Neo-Dev-Host.list name: Neo-Dev-Host.list id: 1636012837whitelist_filters: [ ]user_rules: - '||active.tc.skysrt.com^' - '||ad.3.cn^' - '||admaster.com.cn^' - '||alog.umeng.com^' - '||amdcopen.m.taobao.com^' - '||api.app.skysrt.com^' - '||api.device.skysrt.com^' - '||api.hoisin.hw.coocaatv.com^' - '||api.home.skysrt.com^' - '||api.skyworthiot.com^' - '||api.upgrade.skysrt.com^' - '||api-app.coocaa.ottcn.com^' - '||api-home.coocaa.ottcn.com^' - '||api-home.skysrt.com^' - '||api-upgrade.coocaa.ottcn.com^' - '||app.snm0516.aisee.tv^' - '||btrace.play.t002.ottcn.com^' - '||business.video.tc.skysrt.com^' - '||cl-dl.cc0808.com^' - '||clog.skysrt.com^' - '||conf-darwin.xycdn.com^' - '||connect.play.aiseet.atianqi.com^' - '||data-dl.skysrt.com^' - '||data-hoisin.coocaa.com^' - '||dl.skysrt.com^' - '||dp3.play.t002.ottcn.com^' - '||gs.getui.com^' - '||hoisin.coocaa.com^' - '||hoisin.coocaatv.com^' - '||irs01.com^' - '||kaola.com^' - '||livep.l.t002.ottcn.com^' - '||log.skysrt.com^' - '||mdp-at.geely.com^' - '||member.coocaa.com^' - '||miaozhen.com^' - '||mtrace.play.t002.ottcn.com^' - '||ocsp.int-x3.letsencrypt.org^' - '||p.tencentmind.com^' - '||play.t002.ottcn.com^' - '||push.tc.skysrt.com^' - '||push.tvos.skysrt.com^' - '||puui.qpic.cn^' - '||qr.coocaa.com^' - '||res.hoisin.coocaatv.com^' - '||rpc-tc.skysrt.com^' - '||rpt-gdt.play.t002.ottcn.com^' - '||s.jpush.cn^' - '||sdk1xyajs.data.p2cdn.com^' - '||sis.jpush.io^' - '||sky.tvos.skysrt.com^' - '||skyworthdigital.com^' - '||skyworthiot.com^' - '||stats.jpush.cn^' - '||status.tvos.skysrt.com^' - '||status2.tvos.skysrt.com^' - '||sv.video.qq.com^' - '||taps.net^' - '||tq.skysrt.com^' - '||tracker.appadhoc.com^' - '||tvapp.hpplay.cn^' - '||tvos.skysrt.com^' - '||tx.ctrmi.cn^' - '||umengacs.m.taobao.com^' - '||uop.umeng.com^' - '||update01.skyworth-cloud.com.wswebpic.com^' - '||update01.skyworth-cloud.com^' - '||vqq.admaster.com.cn^' - '||webapp.skysrt.com^' - '||bak.bajintech.com^$important^' - '||iwd.skysrt.com^$important^' - '||ipv4only.arpa^$important^' - '||api.bajintech.com^$important^' - '||wifimodule.doubimeizhi.com^$important^' - '||msy59wz.mqtt.iot.gz.baidubce.com^$important^' - '||i.ytimg.com^$important^' - '# 百家号' - '||baijiahao.baidu.com^' - '@@||apisoft.df0535.com^' - \"\"dhcp: enabled: false interface_name: \"\" dhcpv4: gateway_ip: \"\" subnet_mask: \"\" range_start: \"\" range_end: \"\" lease_duration: 86400 icmp_timeout_msec: 1000 options: [ ] dhcpv6: range_start: \"\" lease_duration: 86400 ra_slaac_only: false ra_allow_slaac: falseclients: [ ]log_compress: falselog_localtime: falselog_max_backups: 0log_max_size: 100log_max_age: 3log_file: \"\"verbose: falseschema_version: 10 OpenWrt关闭LED灯(暂未测试)1$ vim /etc/rc.d/S99turnoffled 1234567#!/bin/ashfor i in ` ls /sys/class/leds `docd /sys/class/ledscd $iecho 0 &gt; brightnessdone 安装lsusb命令12$ opkg update$ opkg install usbutils OpenWrt关闭OPKG检查签名1$ vi /etc/opkg.conf 12# 注释掉这一行#option check_signature 注意事项 只有QSDK固件里面有CPU调速软件 QSDK网络好，OpenWrt插件多 信道36~48，149~161 … 相关项目除了文章中引用的项目，还有以下可能会用到的关联: AX9000和AX6000已经可以获取SSH了 使用虚拟机解锁红米ax6-ssh并刷入qsdk固件 OpenWrt support for Xiaomi AX9000 Xiaomi router AX9000 OpenWrt_Build openwrt-autobuild 小米路由器修复工具 7.8.9. END.","categories":[],"tags":[{"name":"tittle-tattle","slug":"tittle-tattle","permalink":"https://mudew.com/tags/tittle-tattle/"}]},{"title":"TensorFlow v1到v2版本兼容指南","slug":"TensorFlow v1到v2版本兼容指南","date":"2021-09-15T01:08:27.000Z","updated":"2022-01-26T06:44:05.109Z","comments":true,"path":"2021/09/15/tensorflow-v1-to-v2-compatibility-guide/","link":"","permalink":"https://mudew.com/2021/09/15/tensorflow-v1-to-v2-compatibility-guide/","excerpt":"","text":"前言记录TensorFlow 中v2版本使用v1代码的各种问题 问题一Question: 12from keras.utils import multi_gpu_modelImportError: cannot import name 'multi_gpu_model' from 'keras.utils'... Answer: 12345from keras.utils import multi_gpu_modelto:from keras.utils.multi_gpu_utils import multi_gpu_model 问题二Question: 1ValueError: Subshape must have computed start &gt;= end since stride is negative, but is 0 and 2 (computed from start 0 and end 9223372036854775807 over shape with rank 2 and stride-1) Answer: 1234567box_xy = (K.sigmoid(feats[..., :2]) + grid) / K.cast(grid_shape[::-1], K.dtype(feats))box_wh = K.exp(feats[..., 2:4]) * anchors_tensor / K.cast(input_shape[::-1], K.dtype(feats))to:box_xy = (K.sigmoid(feats[..., :2]) + grid) / K.cast(grid_shape[..., ::-1], K.dtype(feats))box_wh = K.exp(feats[..., 2:4]) * anchors_tensor / K.cast(input_shape[..., ::-1], K.dtype(feats)) 问题三Question: 1TypeError: Tensors are unhashable. (KerasTensor(type_spec=TensorSpec(shape=(None, None, None, 3), dtype=tf.float32, name='input_1'), name='input_1', description=\"created by layer 'input_1'\"))Instead, use tensor.ref() as the key. Answer: 12345678910111213from keras import backend as K....self.sess = K.get_session()to: from keras import backend as Kimport tensorflow as tftf.compat.v1.disable_eager_execution().....self.sess = K.get_session() 问题四Question: 1ImportError: cannot import name 'BatchNormalization' from 'keras.layers.norm... Answer: 12345from keras.layers.normalization import BatchNormalizationto: from keras.layers.normalization.batch_normalization import BatchNormalization END.","categories":[],"tags":[{"name":"TensorFlow","slug":"TensorFlow","permalink":"https://mudew.com/tags/TensorFlow/"}]},{"title":"Ubuntu20.04编译安装Python3","slug":"Ubuntu20.04编译安装Python3","date":"2021-06-04T08:32:53.000Z","updated":"2022-01-26T06:44:05.109Z","comments":true,"path":"2021/06/04/ubuntu-20.04-compiling-and-installing-python-3/","link":"","permalink":"https://mudew.com/2021/06/04/ubuntu-20.04-compiling-and-installing-python-3/","excerpt":"","text":"前言记录下安装过程，以便日后查看。 Ubuntu 20.04.2 LTS (使用的Docker ubuntu:latest，可能会与其他环境略有不同。) Python 3.9.5 (发布前最新版本，其他版本操作相通。) 以下操作都是基于ROOT权限下操作，如果不是或者权限不足，请在命令前添加 sudo 环境依赖 切换阿里云镜像源加速，Ubuntu 20.04，网络较好可以跳过，如需其他源请自行搜索替换。 12345678910111213141516171819# 备份cp /etc/apt/sources.list /etc/apt/sources.list.backup# 写入echo \"deb http://mirrors.aliyun.com/ubuntu/ focal main restricted universe multiversedeb-src http://mirrors.aliyun.com/ubuntu/ focal main restricted universe multiversedeb http://mirrors.aliyun.com/ubuntu/ focal-security main restricted universe multiversedeb-src http://mirrors.aliyun.com/ubuntu/ focal-security main restricted universe multiversedeb http://mirrors.aliyun.com/ubuntu/ focal-updates main restricted universe multiversedeb-src http://mirrors.aliyun.com/ubuntu/ focal-updates main restricted universe multiversedeb http://mirrors.aliyun.com/ubuntu/ focal-proposed main restricted universe multiversedeb-src http://mirrors.aliyun.com/ubuntu/ focal-proposed main restricted universe multiversedeb http://mirrors.aliyun.com/ubuntu/ focal-backports main restricted universe multiversedeb-src http://mirrors.aliyun.com/ubuntu/ focal-backports main restricted universe multiverse\" &gt; /etc/apt/sources.list# 更新apt update &amp;&amp; apt upgrade -y 安装编译Python需要的依赖包，全面安装，为了编译后不出现各种问题，宁错杀一千不放过一个包。 1234# 看需求安装 有些包是编译PHP用的 懒得拆分了 有强迫症的可以试试apt install gcc make wget curl build-essential autoconf automake m4 openssl libreadline-dev libncursesw5-dev libssl-dev libsqlite3-dev tk-dev libgdbm-dev libc6-dev libbz2-dev libffi-dev zlib1g-dev -yapt install libbz2-dev libxml2-dev libjpeg-dev libpng-dev libfreetype6-dev libzip-dev libssl-dev libsqlite3-dev libcurl4-openssl-dev libgmp3-dev libonig-dev libreadline-dev libxslt1-dev libffi-dev -y# apt install libpcre3-dev libjpeg62-dev libpng12-dev libpng3 libpnglite-dev libiconv-hook-dev libiconv-hook1 libmcrypt-dev libmcrypt4 libmhash-dev libmhash2 libltdl-dev libmysqlclient-dev libmagickcore-dev libmagickwand-dev libedit-dev -y 下载 选择需要的版本下载XZ Compressed source tabball，下载速度慢可以考虑镜像下载。 Python下载官网 | Python3.9.5 Python下载镜像 | Python3.9.5 12wget https://www.python.org/ftp/python/3.9.5/Python-3.9.5.tar.xz# wget https://npm.taobao.org/mirrors/python/3.9.5/Python-3.9.5.tar.xz 安装以Python3.9.5安装为例 123456789101112131415161718# 解包，解压缩xz -d Python-3.9.5.tar.xztar -xvf Python-3.9.5.tar# 进入目录cd Python-3.9.5# 编译./configure --prefix=/usr/local/python3.9.5 --enable-optimizations# --prefix=/usr/local/python3.9.5 预安装目录# --enable-optimizations 是优化选项(LTO，PGO 等)加上这个 flag 编译后，性能有 10% 左右的优化(看需求)# 安装make &amp;&amp; make install# 创建软链接 方便使用ln -s /usr/local/python3.9.5/bin/python3.9 /usr/local/bin/python3.9ln -s /usr/local/python3.9.5/bin/pip3.9 /usr/local/bin/pip3.9 等待编译完成即可，如果没有什么其他的报错，应该就OK的。 使用 使用python3.9 xxx.py和pip3.9 install xxxx 怎么喜欢怎么来 123456789101112131415161718192021222324252627root@de9bc33b1a58:~# pip3.9 -Vpip 21.1.1 from &#x2F;usr&#x2F;local&#x2F;python3.9.5&#x2F;lib&#x2F;python3.9&#x2F;site-packages&#x2F;pip (python 3.9)root@de9bc33b1a58:~# python3.9 -VPython 3.9.5root@de9bc33b1a58:~# python3.9Python 3.9.5 (default, Jun 3 2021, 12:04:16)[GCC 9.3.0] on linuxType &quot;help&quot;, &quot;copyright&quot;, &quot;credits&quot; or &quot;license&quot; for more information.&gt;&gt;&gt; import requests&gt;&gt;&gt; print(requests.get(&quot;http:&#x2F;&#x2F;ip-api.com&#x2F;json&quot;).json())&#123; &quot;status&quot;:&quot;success&quot;, &quot;country&quot;:&quot;China&quot;, &quot;countryCode&quot;:&quot;*&quot;, &quot;region&quot;:&quot;*&quot;, &quot;regionName&quot;:&quot;*&quot;, &quot;city&quot;:&quot;*&quot;, &quot;zip&quot;:&quot;&quot;, &quot;lat&quot;:*, &quot;lon&quot;:*, &quot;timezone&quot;:&quot;Asia&#x2F;Shanghai&quot;, &quot;isp&quot;:&quot;*&quot;, &quot;org&quot;:&quot;&quot;, &quot;as&quot;:&quot;*&quot;, &quot;query&quot;:&quot;*&quot;&#125;&gt;&gt;&gt; PIP源123456789清华：https:&#x2F;&#x2F;pypi.tuna.tsinghua.edu.cn&#x2F;simple阿里云：https:&#x2F;&#x2F;mirrors.aliyun.com&#x2F;pypi&#x2F;simple&#x2F;中国科技大学 https:&#x2F;&#x2F;pypi.mirrors.ustc.edu.cn&#x2F;simple&#x2F;豆瓣：https:&#x2F;&#x2F;pypi.doubanio.com&#x2F;simple&#x2F;# pip3.9 install xxxx -i https:&#x2F;&#x2F;pypi.tuna.tsinghua.edu.cn&#x2F;simple END.","categories":[],"tags":[{"name":"Python","slug":"Python","permalink":"https://mudew.com/tags/Python/"}]},{"title":"和彩云网盘研究记录","slug":"和彩云网盘研究记录","date":"2021-03-23T04:25:45.000Z","updated":"2022-01-26T06:44:05.109Z","comments":true,"path":"2021/03/23/and-caiyun-network-disk-research-records/","link":"","permalink":"https://mudew.com/2021/03/23/and-caiyun-network-disk-research-records/","excerpt":"","text":"前言清一色的开篇，目的只为水一篇文章…本次研究对象 和彩云网盘(mCloud)7.3.4此记录更偏向于结果，只保证研究版本有效，去年分析的，今年才发，不保证有效 栗子 账密方式登录 123456789101112131415161718192021222324252627282930313233343536373839POST https:&#x2F;&#x2F;aas.caiyun.feixin.10086.cn&#x2F;tellin&#x2F;thirdlogin.do HTTP&#x2F;1.1x-DeviceInfo: 1|10.0.3.15|1|7.3.4|Netease|MuMu|87AD2EDF19FFE5D7779D4191937FD5F0|08-00-27-e5-3d-e6|android 6.0.1|900X1600|zh|||x-ExpRoute-Code: routeCode&#x3D;18880886001,type&#x3D;10Accept-Charset: UTF-8x-NetType: 1x-MM-Source: 000x-SvcType: 1Accept: text&#x2F;html,application&#x2F;xhtml+xml,application&#x2F;xml;Connection: keep-alivex-huawei-channelSrc: 10000023X-Tingyun-Id: p35OnrDoP8k;c&#x3D;2;r&#x3D;1339375589;Content-Type: text&#x2F;plain; charset&#x3D;utf-8Content-Length: 344Host: aas.caiyun.feixin.10086.cnAccept-Encoding: gzipUser-Agent: okhttp&#x2F;3.11.0&lt;?xml version&#x3D;&quot;1.0&quot; encoding&#x3D;&quot;UTF-8&quot;?&gt;&lt;root&gt;&lt;msisdn&gt;18880886001&lt;&#x2F;msisdn&gt;&lt;random&#x2F;&gt;&lt;secinfo&gt;871D0A9E95ABA22B4604224CFBA24E605FABBC34&lt;&#x2F;secinfo&gt;&lt;version&gt;572&lt;&#x2F;version&gt;&lt;clienttype&gt;414&lt;&#x2F;clienttype&gt;&lt;pintype&gt;9&lt;&#x2F;pintype&gt;&lt;dycpwd&#x2F;&gt;&lt;cpid&gt;58&lt;&#x2F;cpid&gt;&lt;verfycode&#x2F;&gt;&lt;requestip&gt;10.0.2.15&lt;&#x2F;requestip&gt;&lt;mac&#x2F;&gt;&lt;extInfo&#x2F;&gt;&lt;UID&#x2F;&gt;&lt;loginMode&gt;1&lt;&#x2F;loginMode&gt;&lt;srvInfoVer&#x2F;&gt;&lt;&#x2F;root&gt;# 账密正确情况HTTP&#x2F;1.1 200 OKSet-Cookie: JSESSIONID&#x3D;DE25E78BB56608CD1C186B867BF33C67; Path&#x3D;&#x2F;tellin&#x2F;; Secure; HttpOnlyContent-Type: text&#x2F;plain;charset&#x3D;utf-8Content-Length: 4992Date: Sun, 25 Oct 2020 04:35:41 GMTServer: HTTPS8F5060F5F1158B1CD0C081BA51C02C12DAD4C8F839CE2E44954B1DFE5A7C0137F0FA3FEB366B23A7B9EB4535AC403D0CDF26EB5973C647B26BEB85EBDCA65595AFFC1149A6D387........# 账密错误情况HTTP&#x2F;1.1 200 OKSet-Cookie: JSESSIONID&#x3D;87D4DF3AB2ABD9A5CEB777E26419377F; Path&#x3D;&#x2F;tellin&#x2F;; Secure; HttpOnlyContent-Type: text&#x2F;plain;charset&#x3D;utf-8Content-Length: 86Date: Sun, 25 Oct 2020 04:33:13 GMTServer: HTTPS&lt;root&gt;&lt;return&gt;200050401&lt;&#x2F;return&gt;&lt;desc&gt;The user information is incorrect.&lt;&#x2F;desc&gt;&lt;&#x2F;root&gt; 观察以上登录请求发现加密的东西不少，请求头、请求体、响应体都有不同程度的加密 请求头(Request Headers)只写几个比较重要的，大部分可以为空或者默认值 x-DeviceInfo1x-DeviceInfo: 1|10.0.3.15|1|7.3.4|Netease|MuMu|87AD2EDF19FFE5D7779D4191937FD5F0|08-00-27-e5-3d-e6|android 6.0.1|900X1600|zh||| 包含的东西比较多，以|分隔数据 ，下面表格按分割后的数据显示 原始数据 代表内容 1(1) 网络类型 10.0.3.15 IP地址 1(2) 固定默认 7.3.4 SDK版本 Netease MANUFACTURER MuMu MODEL 87AD2EDF19FFE5D7779D4191937FD5F0 生成UUID 08-00-27-e5-3d-e6 MAC地址 android 6.0.1 ANDROID版本 900X1600 分辨率 zh 默认值 空 空 空 空 x-ExpRoute-Code1x-ExpRoute-Code: routeCode&#x3D;18880886001,type&#x3D;10 原始数据 代表内容 routeCode 手机号 type 如果是手机号登录 默认值为10 请求体(Request Payload)内容组成为XML，大部分可以为空或者默认值 XML123456789101112131415161718&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;&lt;root&gt; &lt;msisdn&gt;18880886001&lt;/msisdn&gt; &lt;random/&gt; &lt;secinfo&gt;871D0A9E95ABA22B4604224CFBA24E605FABBC34&lt;/secinfo&gt; &lt;version&gt;572&lt;/version&gt; &lt;clienttype&gt;414&lt;/clienttype&gt; &lt;pintype&gt;9&lt;/pintype&gt; &lt;dycpwd/&gt; &lt;cpid&gt;58&lt;/cpid&gt; &lt;verfycode/&gt; &lt;requestip&gt;10.0.2.15&lt;/requestip&gt; &lt;mac/&gt; &lt;extInfo/&gt; &lt;UID/&gt; &lt;loginMode&gt;1&lt;/loginMode&gt; &lt;srvInfoVer/&gt;&lt;/root&gt; 以下sha-1()、md5()等代表加密方式 , {}代表字符串拼接填充 原始数据 代表内容 secinfo sha-1(fetion.com.cn:{password}) 响应体(Response Payload)密文登录成功后，返回数据为一长串密文，需要搭配上下文的东西解密使用 128F5060F5F1158B1CD0C081BA51C02C12DAD4C8F839CE2E44954B1DFE5A7C0137F0FA3FEB366B23A7B9EB4535AC403D0CDF26EB5973C647B26BEB85EBDCA65595AFFC1149A6D387........ 123456# 拼接字符串add_key &#x3D; GErfJus#Ofr%# 秘钥算法clientkeyDecrypt &#x3D; md5(&#123;secinfo&#125;&#123;add_key&#125;) -&gt; substring(0, 16) -&gt; toUpperCase()# 解密算法result &#x3D; AES() -&gt; decodeCerResponse(byte(response), byte(clientkeyDecrypt)) 算法为AES加密解密(ECB模式) , 解密秘钥为以上clientkeyDecryptclientkeyDecrypt 为MD5后取前16位转大写 , ECB模式无填充解密即可 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152&lt;root&gt; &lt;return&gt;0&lt;/return&gt; &lt;imspwd&gt;E7E673CD95AEF839206A15A62AFE60E5&lt;/imspwd&gt; &lt;sbc&gt;&lt;/sbc&gt; &lt;domain&gt;&lt;/domain&gt; &lt;svnlist&gt;&lt;/svnlist&gt; &lt;svnuser&gt;&lt;/svnuser&gt; &lt;svnpwd&gt;&lt;/svnpwd&gt; &lt;htslist&gt;&lt;/htslist&gt; &lt;userType&gt;1&lt;/userType&gt; &lt;userid&gt;1711h52AR1yI&lt;/userid&gt; &lt;loginid&gt;160334480555369&lt;/loginid&gt; &lt;heartime&gt;4&lt;/heartime&gt; &lt;funcId&gt;1000000000000000&lt;/funcId&gt; &lt;token&gt;gquJ43xQ|1|RCS|1605936805651|BnEaDQrCg8cUJ1Mp4GjV1.dmGoOVrB0meR52eij8PBOOtkY8x3c5MI92EP_rBWg4tuPUOLExb.wl724cetD5rUHz5BlW5OzaMK0Z6SiA52Kst0Nvt.sBnIi4bYK8x5etKwRZeTUya6ULgApq_vQgTdM9pCaqnaKiDV1vqBGXkaQ-&lt;/token&gt; &lt;expiretime&gt;2592000&lt;/expiretime&gt; &lt;authToken&gt;gquJ43xQ|1|RCS|1605936805651|BnEaDQrCg8cUJ1Mp4GjV1.dmGoOVrB0meR52eij8PBOOtkY8x3c5MI92EP_rBWg4tuPUOLExb.wl724cetD5rUHz5BlW5OzaMK0Z6SiA52Kst0Nvt.sBnIi4bYK8x5etKwRZeTUya6ULgApq_vQgTdM9pCaqnaKiDV1vqBGXkaQ-&lt;/authToken&gt; &lt;atExpiretime&gt;2592000&lt;/atExpiretime&gt; &lt;deviceid&gt;5617A97CE3EA4B7187F4A6D84CB02880&lt;/deviceid&gt; &lt;serverinfo&gt; &lt;mbhttpsurl&gt;https://ose1.caiyun.feixin.10086.cn:8542/isbo/openApi/&lt;/mbhttpsurl&gt; &lt;fburl&gt;http://mrp.weibo.10086.cn&lt;/fburl&gt; &lt;editurl&gt;http://edit.caiyun.feixin.10086.cn&lt;/editurl&gt; &lt;mediaurl&gt;http://120.132.156.103:80&lt;/mediaurl&gt; &lt;cmpassurl&gt;https://www.cmpassport.com&lt;/cmpassurl&gt; &lt;cytxlurl&gt;https://auth.cytxl.com.cn&lt;/cytxlurl&gt; &lt;fxcaptchaurl&gt;http://nav.fetion.com.cn&lt;/fxcaptchaurl&gt; &lt;xmppaddr&gt;221.176.66.104:5225,221.176.66.104:5226,221.176.66.104:5227&lt;/xmppaddr&gt; &lt;boshurl&gt;221.176.66.104:8081,221.176.66.104:8082,221.176.66.104:8083&lt;/boshurl&gt; &lt;marketurl&gt;http://mcmm.caiyun.feixin.10086.cn:80&lt;/marketurl&gt; &lt;invitecodeurl&gt;http://caiyun.feixin.10086.cn/i.jsp&lt;/invitecodeurl&gt; &lt;pingurl&gt;http://221.176.66.99:80&lt;/pingurl&gt; &lt;rifurl&gt;http://ose.caiyun.feixin.10086.cn:80/richlifeApp&lt;/rifurl&gt; &lt;wapUrl&gt;http://caiyun.feixin.10086.cn:7070&lt;/wapUrl&gt; &lt;rifhttpsurl&gt;https://ose.caiyun.feixin.10086.cn:443/richlifeApp&lt;/rifhttpsurl&gt; &lt;chargeUrl&gt;https://cmmedia.caiyun.feixin.10086.cn:443&lt;/chargeUrl&gt; &lt;isboUrl&gt;https://ose1.caiyun.feixin.10086.cn:8542&lt;/isboUrl&gt; &lt;calURL&gt;http://ose.caiyun.feixin.10086.cn/richlifeApp&lt;/calURL&gt; &lt;testTermConnectURL&gt;http://aas.caiyun.feixin.10086.cn/tellin/usr/puc/ispace/testTermConnect.do&lt;/testTermConnectURL&gt; &lt;/serverinfo&gt; &lt;account&gt;15802336010&lt;/account&gt; &lt;expiryDate&gt;-1&lt;/expiryDate&gt; &lt;areaCode&gt;23&lt;/areaCode&gt; &lt;provCode&gt;23&lt;/provCode&gt; &lt;userExtInfo&gt; &lt;passID&gt;844163976&lt;/passID&gt; &lt;AndID&gt;844163976&lt;/AndID&gt; &lt;isRegWeibo&gt;-1&lt;/isRegWeibo&gt; &lt;accessToken&gt;NTE1MUFCNjcxMTM2RjA1QTg3N0VBOUU4ODQzRjE3QkIyOEY2RjQ4Qzk5RUY4NUFDMEVBODMxOEQyRTk2NEU1ODo0NDYxMDE=&lt;/accessToken&gt; &lt;/userExtInfo&gt; &lt;srvInfoVer&gt;D071457A5A1AE65EADDB39E38EE3A2F8&lt;/srvInfoVer&gt;&lt;/root&gt;\u000f\u000f\u000f\u000f\u000f\u000f\u000f\u000f\u000f\u000f\u000f\u000f\u000f\u000f\u000f 注意解密后数据尾部有N个\\x0f or \\x0b or \\x0c or \\x06可能为其他不同的字符，最好写通用匹配方式去除 实现 仓库地址 和彩云-内容加解密代码逻辑比较简单，详情施工中… 总结该文章代码只为学习，麻烦未经允许禁止转载哦 END.","categories":[],"tags":[{"name":"CaiYun","slug":"CaiYun","permalink":"https://mudew.com/tags/CaiYun/"},{"name":"10086","slug":"10086","permalink":"https://mudew.com/tags/10086/"},{"name":"feixin","slug":"feixin","permalink":"https://mudew.com/tags/feixin/"},{"name":"网盘","slug":"网盘","permalink":"https://mudew.com/tags/%E7%BD%91%E7%9B%98/"},{"name":"逆向","slug":"逆向","permalink":"https://mudew.com/tags/%E9%80%86%E5%90%91/"}]},{"title":"Bilibili Web端直播加密心跳请求解析","slug":"Bilibili-Web端直播加密心跳请求解析","date":"2020-07-22T05:11:38.000Z","updated":"2022-01-26T06:44:05.109Z","comments":true,"path":"2020/07/22/analysis-of-bilibilibili-web-side-live-broadcast-encryption-heartbeat-request/","link":"","permalink":"https://mudew.com/2020/07/22/analysis-of-bilibilibili-web-side-live-broadcast-encryption-heartbeat-request/","excerpt":"","text":"前言清一色的开篇，目的只为水一篇文章…这次是Bilibili Web端直播心跳API一个加解密算法去年写的东西，放着一直没怎么使用，一直懒就没写…以下所有数据都脱敏处理或者打码，不要作测试数据… Bilibili Live如果研究的朋友，可能都抓过包看过数据包的情况有两个关键请求，分别为reportEnterRoom和reportHeartBeat两个请求在不同状态下带入一个加密参数 s reportEnterRoom https://live-trace.bilibili.com/xlive/data-interface/v1/x25Kn/EE请求在心跳流程中只请求一次，进入房间 12345678910111213# E 1id: [1,145,0,123456]device: [&quot;AUTO3915894629123456&quot;,&quot;799c882c-06de-4bfe-a358-98a76dccfa07&quot;]ts: 1595348574562is_patch: 0heart_beat: []ua: Mozilla&#x2F;5.0 (Windows NT 10.0; Win64; x64) AppleWebKit&#x2F;537.36 (KHTML, like Gecko) Chrome&#x2F;83.0.4103.116 Safari&#x2F;537.36 Edg&#x2F;83.0.478.64csrf_token: 08jbtyz494rzim62c7k29mk7tjc8s5ezcsrf: 08jbtyz494rzim62c7k29mk7tjc8s5ezvisit_id: &#123;&quot;code&quot;:0,&quot;message&quot;:&quot;0&quot;,&quot;ttl&quot;:1,&quot;data&quot;:&#123;&quot;timestamp&quot;:1595348575,&quot;heartbeat_interval&quot;:300,&quot;secret_key&quot;:&quot;seacasdgyijfhofiuxoannn&quot;,&quot;secret_rule&quot;:[2,5,1,4],&quot;patch_status&quot;:2&#125;&#125; is_patch == 0 -&gt; heart_beat == [] 一般直接使用这个 123# E 2is_patch: 1heart_beat: [&#123;&quot;s&quot;:&quot;jjh64tcxjjjd062s2sfxfkrcey63a0z1jc9hrkjyy4d9436fib9wj0pynwmncpeib9i4ckjxmnkw1e0h41mn86fir47yzcafrspzrp05i9rnf0dbje6ndcsk3f1bm4th&quot;,&quot;id&quot;:&quot;[6,235,1,123456]&quot;,&quot;device&quot;:&quot;[\\&quot;AUTO3915894629123456\\&quot;,\\&quot;7b9faf1a-cdd0-45a7-8355-e68972550341\\&quot;]&quot;,&quot;ets&quot;:1595248610,&quot;benchmark&quot;:&quot;seacasdgyijfhofiuxoannn&quot;,&quot;time&quot;:285,&quot;ts&quot;:1595248894609,&quot;ua&quot;:&quot;Mozilla&#x2F;5.0 (Windows NT 10.0; Win64; x64) AppleWebKit&#x2F;537.36 (KHTML, like Gecko) Chrome&#x2F;83.0.4103.116 Safari&#x2F;537.36 Edg&#x2F;83.0.478.64&quot;&#125;] is_patch == 1 -&gt; heart_beat == [**] 短时间内重复进出直播间触发 reportHeartBeat https://live-trace.bilibili.com/xlive/data-interface/v1/x25Kn/XX请求在心跳流程中按次循环，必须先E再循环请求X 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960# X 1s: d6fb6f7fdef8de9262e2b27ff6ef185a8d2ff72ce68f0a3648797e146bd655d6f5aab5e8f46826cde306267de149ae439a8ed6c3ce1e22220f2af498be1d144fid: [1,145,1,123456]device: [&quot;AUTO3915894629123456&quot;,&quot;799c882c-06de-4bfe-a358-98a76dccfa07&quot;]ets: 1595348575benchmark: seacasdgyijfhofiuxoannntime: 300ts: 1595348874823ua: Mozilla&#x2F;5.0 (Windows NT 10.0; Win64; x64) AppleWebKit&#x2F;537.36 (KHTML, like Gecko) Chrome&#x2F;83.0.4103.116 Safari&#x2F;537.36 Edg&#x2F;83.0.478.64csrf_token: 08jbtyz494rzim62c7k29mk7tjc8s5ezcsrf: 08jbtyz494rzim62c7k29mk7tjc8s5ezvisit_id: k5fj7uhwfn4&#123;&quot;code&quot;:0,&quot;message&quot;:&quot;0&quot;,&quot;ttl&quot;:1,&quot;data&quot;:&#123;&quot;heartbeat_interval&quot;:300,&quot;timestamp&quot;:1595348875,&quot;secret_rule&quot;:[2,5,1,4],&quot;secret_key&quot;:&quot;seacasdgyijfhofiuxoannn&quot;&#125;&#125;# X 2s: 8323ed71eac733c50956f46fbe10023826270197ee4af09c6ef036c1a798005298036de230bfc8ecde2e4018ee232884a2a813d89d12d701ab16f5c23d685ec9id: [1,145,2,123456]device: [&quot;AUTO3915894629123456&quot;,&quot;799c882c-06de-4bfe-a358-98a76dccfa07&quot;]ets: 1595348875benchmark: seacasdgyijfhofiuxoannntime: 300ts: 1595349175008ua: Mozilla&#x2F;5.0 (Windows NT 10.0; Win64; x64) AppleWebKit&#x2F;537.36 (KHTML, like Gecko) Chrome&#x2F;83.0.4103.116 Safari&#x2F;537.36 Edg&#x2F;83.0.478.64csrf_token: 08jbtyz494rzim62c7k29mk7tjc8s5ezcsrf: 08jbtyz494rzim62c7k29mk7tjc8s5ezvisit_id: k5fj7uhwfn4&#123;&quot;code&quot;:0,&quot;message&quot;:&quot;0&quot;,&quot;ttl&quot;:1,&quot;data&quot;:&#123;&quot;heartbeat_interval&quot;:300,&quot;timestamp&quot;:1595349175,&quot;secret_rule&quot;:[2,5,1,4],&quot;secret_key&quot;:&quot;seacasdgyijfhofiuxoannn&quot;&#125;&#125; # X 3s: 369b18326a99fff5b5556da14039f807f21030e390de6f204a53d0cab0cccba7f0d0bcc60347f8fc43d9905be775f0c0fcdab4dd9bd6c8a52465f4a19b35cf36id: [1,145,3,123456]device: [&quot;AUTO3915894629123456&quot;,&quot;799c882c-06de-4bfe-a358-98a76dccfa07&quot;]ets: 1595349175benchmark: seacasdgyijfhofiuxoannntime: 300ts: 1595349475071ua: Mozilla&#x2F;5.0 (Windows NT 10.0; Win64; x64) AppleWebKit&#x2F;537.36 (KHTML, like Gecko) Chrome&#x2F;83.0.4103.116 Safari&#x2F;537.36 Edg&#x2F;83.0.478.64csrf_token: 08jbtyz494rzim62c7k29mk7tjc8s5ezcsrf: 08jbtyz494rzim62c7k29mk7tjc8s5ezvisit_id: k5fj7uhwfn4&#123;&quot;code&quot;:0,&quot;message&quot;:&quot;0&quot;,&quot;ttl&quot;:1,&quot;data&quot;:&#123;&quot;heartbeat_interval&quot;:300,&quot;timestamp&quot;:1595349475,&quot;secret_rule&quot;:[2,5,1,4],&quot;secret_key&quot;:&quot;seacasdgyijfhofiuxoannn&quot;&#125;&#125;# X 4s: b9486ab176a70d444c7e34aa2f35c09270365fd15f5fc023036a426165d38a6fa831cde17de8a37007c53fcb204cfc0155167647c42bca263007068a42774592id: [1,145,4,123456]device: [&quot;AUTO3915894629123456&quot;,&quot;799c882c-06de-4bfe-a358-98a76dccfa07&quot;]ets: 1595349475benchmark: seacasdgyijfhofiuxoannntime: 300ts: 1595349775262ua: Mozilla&#x2F;5.0 (Windows NT 10.0; Win64; x64) AppleWebKit&#x2F;537.36 (KHTML, like Gecko) Chrome&#x2F;83.0.4103.116 Safari&#x2F;537.36 Edg&#x2F;83.0.478.64csrf_token: 08jbtyz494rzim62c7k29mk7tjc8s5ezcsrf: 08jbtyz494rzim62c7k29mk7tjc8s5ezvisit_id: k5fj7uhwfn4&#123;&quot;code&quot;:0,&quot;message&quot;:&quot;0&quot;,&quot;ttl&quot;:1,&quot;data&quot;:&#123;&quot;heartbeat_interval&quot;:300,&quot;timestamp&quot;:1595349775,&quot;secret_rule&quot;:[2,5,1,4],&quot;secret_key&quot;:&quot;seacasdgyijfhofiuxoannn&quot;&#125;&#125; Parameter 参数注意数据规律，除了参数s，以下几个参数比较重要 NAME DESCRIBE REMARKS ts 请求时间 null ets 可从E-&gt;X*n依次从回显中取值 null id 大分区、小分区、轮次、长位直播间 null secret_rule 加密规则 null heartbeat_interval 请求之间的休眠 null secret_key 加密规则 null 设备、版本不同可能存在参数差异 逻辑这里只贴一下大概的流程，具体的细节可以看后面的代码加密前明文主要是一些直播参数，以及dom、’window’、document加密部分是一个wasm文件，带入参数以及secret_rule等加密加密后密文是一个128位的HASH值解密过程就是一场艰苦的和JS玩捉迷藏的游戏 进入直播间和循环心跳 外层调用心跳以及计算SIGN 初始化Wasm 调用Wasm加密Spyder (加密不止一轮) Spyder本体 (cargo-web) 深度可以看看wasm2wat demo Demo 只是贴出大概步骤，跳转并只不是一个js文件里发生 实现 仓库地址 哔哩哔哩 Web端直播加密心跳请求解析代码逻辑比较简单，详情施工中 总结文章写的比较乱不全，会贴出加解密部分，剩下的东西自己分析了该文章代码只为学习，麻烦未经允许禁止转载哦 靠别人写全部代码，不太可能，大家都是鸽子，咕咕咕！ END.","categories":[],"tags":[{"name":"Bilibili","slug":"Bilibili","permalink":"https://mudew.com/tags/Bilibili/"},{"name":"Live","slug":"Live","permalink":"https://mudew.com/tags/Live/"},{"name":"Heartbeat","slug":"Heartbeat","permalink":"https://mudew.com/tags/Heartbeat/"},{"name":"Wasm","slug":"Wasm","permalink":"https://mudew.com/tags/Wasm/"},{"name":"Js","slug":"Js","permalink":"https://mudew.com/tags/Js/"}]},{"title":"Bilibili Android客户端播放API数据包解析","slug":"Bilibili-Android客户端播放数据包解析","date":"2019-06-11T07:52:14.000Z","updated":"2022-01-26T06:44:05.109Z","comments":true,"path":"2019/06/11/analysis-of-api-packet-played-by-bilibili-android-client/","link":"","permalink":"https://mudew.com/2019/06/11/analysis-of-api-packet-played-by-bilibili-android-client/","excerpt":"","text":"前言博客也很久没水了，从日更周更到N月更，不知道写一些什么好…这次是Bilibili客户端播放API的一个加解密算法，也折腾了我一段时间，东西写好很久了，一直懒就没写… BiliBili如果研究的朋友，可能都抓过包看过数据包的情况 如图所示，播放计数的API，以及请求头、请求体、返回值 API: https://api.bilibili.com/x/report/click/android2 请求头的数据还是比较正常，但是看到请求体部分，瞬间懵圈了是一片乱码字符串，看了整个播放过程的API，只有这个是加密乱码的如果不是某段时间出现的代码，我也不知道这个是什么算法。 加解密必要秘钥等 NAME VALUE TYPE DESCRIBE AES_KEY fd6b639dbcff0c2a1b03b389ec763c4b string null AES_IV 77b07a672d57d64c string null SHA256_SALT 9cafa6466a028bfb string null 这只适用于安卓客户端，和ios客户端等是不通用的 解密解密，主要是为了解出请求参数有些什么，就不贴太多代码在博客上了 解密过程主要就是一个AES解密，暂时用不到Sha256 salt 图中红框内黑色部分数据就是加密的请求体，下面我们来解密参数 黑色部分数据Copy as Base64(因为我的解密代码是基于Base64的) 拆分出来的一部分加解密代码放到了Github哔哩哔哩-App客户端播放参数加解密 解密部分我就不多说了，秘钥等都贴出来了，能折腾的就慢慢折腾我就直接直接贴出解出来的参数，参数比较多 这是登陆后的播放参数 NAME VALUE DESCRIBE access_key f3ae492*0c51 null aid 123456 null auto_play 0 可为0-2 cid 654321 null did BT**4a 和设备相关 epid 0 null ftime 1558340481 null lv 4 null mid 1234 null part 1 分P sid 0 null stime 1558416933 null sub_type 0 null type 3 null sign 22bb3**cdb01b9 sha256加密 这是不登陆的播放参数 NAME VALUE DESCRIBE aid 123456 null cid 654321 null did BT**4a 和设备相关 ftime 1558416933 null lv 0 null mid null 值为空 part 1 分P stime 1558416933 null 设备、版本不同可能存在参数差异 加密大概的加密过程 AES加密( 参数排序(para) + Sha256Hash+salt加密(sign) ) 我就贴一下一部分代码，知道怎么用就好了 12345678910111213141516data = &#123; 'aid': '123456', 'cid': '654321', 'did': 'string', 'ftime': '112233', 'lv': '0', 'mid': '', 'part': '1', 'stime': '112233'&#125;temp_data = urlencode(data)print(temp_data)# aid=123456&amp;cid=654********=&amp;part=1&amp;stime=112233payload = aes_enc(f\"&#123;temp_data&#125;&amp;sign=&#123;hashlib_sha256(temp_data)&#125;\")print(payload)# b'\\xb2\\x8a%\\xef\\xc0\\x18******************0' 代码环境Python3，参数随便写的，还是得按照你自己的解密参数来贴出来的代码只是一部分，基于github上的代码 SHA256 HASH SALT123456def hashlib_sha256(data, salt='9cafa6466a028bfb'): data = bytes(data, encoding='utf-8') salt = bytes(salt, encoding='utf-8') hash = hashlib.sha256(data) hash.update(salt) return hash.hexdigest() AES ENC DECAES的就不贴了，有点长，可以自己去看 总结文章写的比较乱不全，只会贴出加解密部分，剩下的东西自己分析了该文章代码只为学习，麻烦未经允许禁止转载哦最后再贴一遍仓库地址 哔哩哔哩-App客户端播放参数加解密 靠别人写全部代码，不太可能，大家都是鸽子，咕咕咕！ END.","categories":[],"tags":[{"name":"Bilibili","slug":"Bilibili","permalink":"https://mudew.com/tags/Bilibili/"},{"name":"Watch","slug":"Watch","permalink":"https://mudew.com/tags/Watch/"},{"name":"Android","slug":"Android","permalink":"https://mudew.com/tags/Android/"},{"name":"AES","slug":"AES","permalink":"https://mudew.com/tags/AES/"},{"name":"SHA256","slug":"SHA256","permalink":"https://mudew.com/tags/SHA256/"}]},{"title":"Django2.2以上针对Sqlite3版本不匹配","slug":"Django2-2以上针对Sqlite3版本不匹配","date":"2019-04-17T03:51:43.000Z","updated":"2022-01-26T06:44:05.109Z","comments":true,"path":"2019/04/17/django2.2-and-above-do-not-match-sqlite3-version/","link":"","permalink":"https://mudew.com/2019/04/17/django2.2-and-above-do-not-match-sqlite3-version/","excerpt":"","text":"前言很久没有水博客了，在运行一个Django项目的时， 服务器版本大概Centos7.2，新机器花了点时候安装完需要的环境和依赖，本想一发入魂直接成功的，昨天在Ubuntu上成功运行，结果Centos就给我整个报错。 123.....raise ImproperlyConfigured('SQLite 3.8.3 or later is required (found %s).' % Database.sqlite_version)django.core.exceptions.ImproperlyConfigured: SQLite 3.8.3 or later is required (found 3.7.17). 就是Django查到的Sqlite的版本不对，找到的是3.7.17，但是对版本要求(version &lt;= 3.8.3)，爬了一下资料，在Django版本说明中看到 12# SQLite的最低支持版本从3.7.15增加到3.8.3The minimum supported version of SQLite is increased from 3.7.15 to 3.8.3. 这就得升级Sqlite3的版本了 下载Sqlite 下载官网Sqlite 3.28.0 选择需要的版本下载Source Code -&gt; sqlite-autoconf* 安装以写博客时的最新版安装为例 123456789101112131415# 下载$ wget http://www.sqlite.org/2019/sqlite-autoconf-3280000.tar.gz# 解包$ tar -zxvf sqlite-autoconf-3280000.tar.gz# 进入目录$ cd sqlite-autoconf-3280000# 配置 $ ./configure # --prefix=/usr/local 预安装目录(可选)# 编译$ make &amp;&amp; sudo make install 等待编译完成即可，如果没有什么其他的报错，应该就OK的。 测试如果是Centos7，yum更新了最新的Sqlite，默认的版本应该是3.7.17，1234567891011121314151617181920# 备份默认的sqlite$ sudo mv -v /usr/bin/sqlite3 /usr/bin/sqlite3.7.17\"/usr/bin/sqlite3\" -&gt; \"/usr/bin/sqlite3.7.17\"# 复制新版本的sqlite文件夹# 此时目录 sqlite-autoconf-3280000$ sudo cp -v sqlite3 /usr/bin \"sqlite3\" -&gt; \"/usr/bin/sqlite3\"# 查看一下文件是否成功$ ls /usr/bin |grep sqlitesqlite3sqlite3.7.17# 共享库$ export LD_LIBRARY_PATH=\"/usr/local/lib\"# 如果登出后失效的，可以写进~/.bashrc 或 ~/.bash_profile 使用1234567891011121314151617181920212223242526272829# 版本查看$ sqlite3 --version3.28.0 2019-04-16 19:49:53 884b4b7e502b4e991677b53971277adfaf0a04a284f8e483e2553d0f83156b50# Python调用Sqlite版本查看$ python3.6Python 3.6.8 (default, Apr 16 2019, 14:31:25) [GCC 4.8.5 20150623 (Red Hat 4.8.5-36)] on linuxType \"help\", \"copyright\", \"credits\" or \"license\" for more information.&gt;&gt;&gt; import sqlite3&gt;&gt;&gt; sqlite3.sqlite_version'3.28.0'&gt;&gt;&gt; exit()# 运行Django$ python3.6 manage.pyType 'manage.py help &lt;subcommand&gt;' for help on a specific subcommand.Available subcommands:[auth] changepassword createsuperuser[contenttypes] remove_stale_contenttypes... 正常了，没有版本不匹配的报错了。其实主要sqlite3是yum源的最新版本才3.7.17，别卸载它后再装(跳过坑)，yum依赖sqlite，所以只有编译安装或者其他方式安装后替换文件目录。 另外要注意的是，sudo python3.6 &amp; python3.6的执行结果是不同的。 sudo不一定能读到新版本的Sqlite，窝再去爬爬文章待补充。 文章比较乱，机器差异什么的或许有不同，仅供参考。 参考文章: Django2.2で開発サーバー起動時にSQLite3のエラーが出た場合の対応 END.","categories":[],"tags":[{"name":"Python","slug":"Python","permalink":"https://mudew.com/tags/Python/"},{"name":"Sqlite","slug":"Sqlite","permalink":"https://mudew.com/tags/Sqlite/"},{"name":"Django","slug":"Django","permalink":"https://mudew.com/tags/Django/"},{"name":"Centos","slug":"Centos","permalink":"https://mudew.com/tags/Centos/"}]},{"title":"CentOS 7搭建开源签到项目教程","slug":"CentOS-7搭建开源签到项目教程","date":"2018-10-09T10:07:45.000Z","updated":"2022-01-26T06:44:05.109Z","comments":true,"path":"2018/10/09/centos-7-open-source-check-in-project-tutorial/","link":"","permalink":"https://mudew.com/2018/10/09/centos-7-open-source-check-in-project-tutorial/","excerpt":"","text":"前言Centos7.5/Python2.7 准备工作 一台正常工作的VPS 准备一个域名用于解析(可选) 开源项目签到 —— 一个自动签到框架 base on an HAR editor 签到(项目)签到(模板) 搭建部署Centos1234# 开发工具包yum groupinstall \"Development Tools\" -yyum install python-devel mysql-connector-python git -ypip install tornado==4.5.3 u-msgpack-python jinja2 chardet requests pbkdf2 pycryptoUbuntu or Debian12apt-get install python-dev autoconf g++ python-pbkdf2pip install tornado u-msgpack-python jinja2 chardet requests pbkdf2 pycrypto 克隆项目12git clone https://github.com/binux/qiandao.gitcd qiandao 运行项目12345# 后台运行yum install screen -yscreen -S qiandao# 运行python ./run.py 成功的话访问http://ip:8923/ 登陆注册设置管理员1python ./chrole.py your@email.address admin 模板的话可以在主站下载，也可以自己做，都有教程的。 反向代理基本使用用ip访问就好，如果有要求域名的话，就使用反向代理吧123yum install nginx -ysystemctl start nginxvim /etc/nginx/nginx.conf conf配置123456789101112131415server &#123; listen 80; #替换域名 server_name domain.com; #charset koi8-r; #access_log logs&#x2F;host.access.log main; location &#x2F; &#123; proxy_set_header Host $host; proxy_set_header X-Real-Ip $remote_addr; proxy_set_header X-Forwarded-For $remote_addr; proxy_pass http:&#x2F;&#x2F;localhost:8923; &#125; &#125; nginx -t然后重启服务 1systemctl restart nginx 开机自启1systemctl enable nginx 这样就能通过域名访问了 教程很乱，当文档看吧，针对有基础的，很多小细节都没多写。 End…","categories":[],"tags":[{"name":"python","slug":"python","permalink":"https://mudew.com/tags/python/"},{"name":"centos","slug":"centos","permalink":"https://mudew.com/tags/centos/"},{"name":"开源","slug":"开源","permalink":"https://mudew.com/tags/%E5%BC%80%E6%BA%90/"}]},{"title":"如何给Python threading线程加个控制开关","slug":"如何给Python-threading线程加个控制开关","date":"2018-10-02T16:36:19.000Z","updated":"2022-01-26T06:44:05.109Z","comments":true,"path":"2018/10/02/how-to-add-a-control-switch-to-a-python-threading-thread/","link":"","permalink":"https://mudew.com/2018/10/02/how-to-add-a-control-switch-to-a-python-threading-thread/","excerpt":"","text":"前言Python3.6.6/threading/threading.Event,如何给每个线程加一个控制开关。 需求分析在爬虫项目中,threading模块的使用率还是很高的,每个线程之间独立,如果一个线程成功完成了任务退出了，其他的线程还要继续跑吗? 会造成资源浪费,如何给线程之间弄个信号源,一个线程完成任务,其他线程及退出呢?当然可能有很多方法完成目的,我只把自己使用过的方法做个记录。 实践test.py12345678910111213141516171819202122232425262728293031323334353637383940414243444546import randomimport threadingclass Calculation(threading.Thread): def __init__(self, signal): threading.Thread.__init__(self) # 开关控制 self.singal = signal def run(self): self.test() return def test(self): while True: num = random.randint(0, 100) print(threading.currentThread(), num) # 如果其他线程完成任务打开开关,当前线程就退出 if self.singal.isSet(): print(threading.currentThread(), '其他线程已经完成任务,退出!') break # 如果随机数符合了条件,就把开关打开 if num == 66: print(threading.currentThread(), '当前线程完成任务,退出!') self.singal.set() break returnif __name__ == '__main__': # 初始“开关” ，默认值 False event_obj = threading.Event() # 线程列表 threads_list = [] # 开始线程 5个线程 for thread in range(0, 5): threads_list.append(Calculation(signal=event_obj)) for t in threads_list: t.start() # for t in threads: # t.join()看看输出结果,也没什么其他好说的123456789101112131415161718192021222324252627282930313233343536373839# 数据太长,删过一部分,重要的流程还在# \\Pythonvenv\\py3\\Scripts\\python.exe test.py&lt;Calculation(Thread-1, started 24500)&gt; 1&lt;Calculation(Thread-1, started 24500)&gt; 34&lt;Calculation(Thread-1, started 24500)&gt; 60&lt;Calculation(Thread-1, started 24500)&gt; 13&lt;Calculation(Thread-2, started 24400)&gt; 36&lt;Calculation(Thread-2, started 24400)&gt; 60&lt;Calculation(Thread-1, started 24500)&gt; 80&lt;Calculation(Thread-3, started 13304)&gt; 19&lt;Calculation(Thread-2, started 24400)&gt; 87&lt;Calculation(Thread-1, started 24500)&gt; 97&lt;Calculation(Thread-3, started 13304)&gt; 36&lt;Calculation(Thread-2, started 24400)&gt; 3&lt;Calculation(Thread-1, started 24500)&gt; 2&lt;Calculation(Thread-4, started 18092)&gt; 38&lt;Calculation(Thread-5, started 16736)&gt; 62&lt;Calculation(Thread-3, started 13304)&gt; 33&lt;Calculation(Thread-2, started 24400)&gt; 20&lt;Calculation(Thread-2, started 24400)&gt; 97&lt;Calculation(Thread-2, started 24400)&gt; 58&lt;Calculation(Thread-2, started 24400)&gt; 23&lt;Calculation(Thread-5, started 16736)&gt; 37&lt;Calculation(Thread-3, started 13304)&gt; 91&lt;Calculation(Thread-1, started 24500)&gt; 13&lt;Calculation(Thread-4, started 18092)&gt; 11&lt;Calculation(Thread-2, started 24400)&gt; 16&lt;Calculation(Thread-2, started 24400)&gt; 66&lt;Calculation(Thread-2, started 24400)&gt; 当前线程完成任务,退出!&lt;Calculation(Thread-3, started 13304)&gt; 64&lt;Calculation(Thread-1, started 24500)&gt; 19&lt;Calculation(Thread-4, started 18092)&gt; 92&lt;Calculation(Thread-5, started 16736)&gt; 24&lt;Calculation(Thread-3, started 13304)&gt; 其他线程已经完成任务,退出!&lt;Calculation(Thread-1, started 24500)&gt; 其他线程已经完成任务,退出!&lt;Calculation(Thread-4, started 18092)&gt; 其他线程已经完成任务,退出!&lt;Calculation(Thread-5, started 16736)&gt; 其他线程已经完成任务,退出!Process finished with exit code 0 知识点12345678910111213# 定义一个开关obj = threading.Event() # 把开关传进每个线程# 查看开关的状态,返回True或False,默认值 Falseobj.isSet()# 打开开关,此时值为Trueobj.set()# 关闭开关,此时值为Falseobj.clear() End.","categories":[],"tags":[{"name":"python","slug":"python","permalink":"https://mudew.com/tags/python/"},{"name":"threading","slug":"threading","permalink":"https://mudew.com/tags/threading/"}]},{"title":"Python3.6中遇到UnicodeEncodeError错误","slug":"Python3-6中遇到UnicodeEncodeError错误","date":"2018-10-02T16:04:32.000Z","updated":"2022-01-26T06:44:05.109Z","comments":true,"path":"2018/10/02/unicode-encodeerror-encountered-in-python-3.6/","link":"","permalink":"https://mudew.com/2018/10/02/unicode-encodeerror-encountered-in-python-3.6/","excerpt":"","text":"前言Centos7.3/Python3.6.6|中文语言包的安装及中文支持 报错新系统配置Python环境,运行项目出现编码错误。 1UnicodeEncodeError: &#39;ascii&#39; codec can&#39;t encode characters in ordinal not in range(128) 查错 遇事不决问百度，万裁难断询谷歌 一开始搜索发现大部分文章分析是代码编码问题,后来尝试无果。后来猜测可能是编译Python时系统环境编码有问题,经过一通操作，果然解决了，查询了一下，发现网络上果然有些朋友栽在这个坑里,就记录一下解决方案。 解决安装语言12# 包括了\"zh_CN\"yum groupinstall \"fonts\" 查看一下是否安装成功12# 如果有\"zh_CN\"什么的，应该就成功了locale -a |grep \"zh_CN\" 修改语言12vim /etc/locale.conf# LANG=\"zh_CN.UTF-8\" 查看语言12# 查看系统语言变量locale 会出现好几个”zh_CN.UTF-8”就正常的 12# 查看语言包locale -a 如果没有出现错误,就表示中文已经安装成功了,可以尝试一下在终端上操作一下安装删除等操作,看能不能正常输出中文,如果出现错误就单独安装一下。 123# 只针对Centos7 , 6版本是不一样的yum install kde-l10n-Chineseyum reinstall glibc-common 如果一切没有的问题的话,就可以重新编译一下Python3环境。 END.","categories":[],"tags":[{"name":"Python","slug":"Python","permalink":"https://mudew.com/tags/Python/"}]},{"title":"让Python多线程响应Ctrl+C","slug":"让Python多线程响应Ctrl-C","date":"2018-09-23T12:31:51.000Z","updated":"2022-01-26T06:44:05.109Z","comments":true,"path":"2018/09/23/let-python-multithread-respond-to-ctrl-+-c/","link":"","permalink":"https://mudew.com/2018/09/23/let-python-multithread-respond-to-ctrl-+-c/","excerpt":"","text":"前言Python的threading模块，没有提供线程退出的方法。如果程序多线程是死循环，即使CTRL+C也没有任何效果。 响应方法12345678for t in thread_list: # 设置守护 t.setDaemon(True) t.start()# 响应Ctrl+Cwhile True: pass 补充setDaemon(True):，是把子线程设置为守护线程，主线程和子线程会同时运行，主线程结束运行后，无论子线程运行与否，都会和主线程一起结束。所以我们结束空循环的时候，子线程也会退出。 join():join函数会使得主调线程阻塞，直到被调用线程运行结束或超时，才执行主线程。 只需要设置守护线程，挂一个空循环就好了 End.","categories":[],"tags":[{"name":"python","slug":"python","permalink":"https://mudew.com/tags/python/"},{"name":"threading","slug":"threading","permalink":"https://mudew.com/tags/threading/"}]},{"title":"Centos7编译安装Python3","slug":"Centos7编译安装Python3","date":"2018-09-17T08:32:53.000Z","updated":"2022-01-26T06:44:05.109Z","comments":true,"path":"2018/09/17/centos7-compilation-and-installation-of-python-3/","link":"","permalink":"https://mudew.com/2018/09/17/centos7-compilation-and-installation-of-python-3/","excerpt":"","text":"前言Centos7.5/Python3.6.6，记录下安装过程，以便日后查看 依赖123yum install zlib-devel bzip2-devel openssl-devel ncurses-devel sqlite-devel readline-devel tk-devel gcc make -y# 看需求安装yum groupinstall \"Development Tools\" -y 下载Python下载官网Python3.6.6 选择需要的版本下载XZ Compressed source tabball 安装以Python3.6.6安装为例 1234567891011121314# 解包，解压缩xz -d Python-3.6.6.tar.xztar -xvf Python-3.6.6.tar# 进入目录cd Python-3.6.6# 编译./configure --prefix=/usr/local/python3.6.6 --enable-optimizations# --prefix=/usr/local/python3.6.6 预安装目录# --enable-optimizations 是优化选项(LTO，PGO 等)加上这个 flag 编译后，性能有 10% 左右的优化(看需求)# 安装make &amp;&amp; make install 等待编译完成即可，如果没有什么其他的报错，应该就OK的。 使用怎么喜欢怎么来12ln -s /usr/local/python3.6.6/bin/python3.6 /usr/local/bin/python3.6ln -s /usr/local/python3.6.6/bin/pip3.6 /usr/local/bin/pip3.6 使用python3.6 xxx.py和pip3.6 install xxxx END.","categories":[],"tags":[{"name":"Python","slug":"Python","permalink":"https://mudew.com/tags/Python/"}]},{"title":"Python常用下载函数","slug":"Python常用下载函数","date":"2018-07-20T22:32:17.000Z","updated":"2022-01-26T06:44:05.109Z","comments":true,"path":"2018/07/20/python-common-download-functions/","link":"","permalink":"https://mudew.com/2018/07/20/python-common-download-functions/","excerpt":"","text":"前言常用比较万金油的下载函数，记录方便下次调用。 代码12345678910import requestsdef downloadData(url, **kwargs): try: res = requests.get(url, **kwargs) res.raise_for_status() res.encoding = res.apparent_encoding return res.text except: return None **kwargs 允许你将不定长度的键值对, 作为参数传递给一个函数。如果你想要在一个函数里处理带名字的参数, 你应该使用**kwargs。 END.","categories":[],"tags":[{"name":"Python","slug":"Python","permalink":"https://mudew.com/tags/Python/"}]},{"title":"Python3.6安装Twisted报错解决","slug":"Python3-6安装Twisted报错解决","date":"2018-07-20T22:05:51.000Z","updated":"2022-01-26T06:44:05.109Z","comments":true,"path":"2018/07/20/troubleshooting-of-twisted-error-in-python-3.6-installation/","link":"","permalink":"https://mudew.com/2018/07/20/troubleshooting-of-twisted-error-in-python-3.6-installation/","excerpt":"","text":"前言Centos7.4/Python3.6.6 报错安装Scrapy时需要Twisted依赖，使用pip3 install Twisted安装，但是报了一个错误。 1This is the last Twisted release where... 查错 遇事不决问百度，万裁难断询谷歌 经过一番搜索后，问题是Twisted模块和高版本Python有兼容性问题，可以选择在官网下载文件然后编译安装。 解决Twisted官网 去官网下载对应的版本，我这里选一个目前最新版本，是支持Python3.6的 123456789101112131415# 下载wget https://twistedmatrix.com/Releases/Twisted/18.7/Twisted-18.7.0.tar.bz2# ...# 解压tar -xvf Twisted-18.7.0.tar.bz2#...# 进入目录cd Twisted-18.7.0# ...# 编译安装python3 setup.py install# ... 等待编译完成即可，如果没有什么其他的报错，应该就OK的。 END.","categories":[],"tags":[{"name":"Python","slug":"Python","permalink":"https://mudew.com/tags/Python/"}]},{"title":"Docker随记","slug":"Docker随记","date":"2018-04-28T04:31:50.000Z","updated":"2022-01-26T06:44:05.109Z","comments":true,"path":"2018/04/28/docker-notes/","link":"","permalink":"https://mudew.com/2018/04/28/docker-notes/","excerpt":"","text":"前言记录一些Docker的使用 文档 Docker文档 容器服务 服务商 阿里云 灵雀云 DaoCloud DockerHub add… 运行12345678docker run -it -p local_port:container_port --name=\"example\" -v local_path:container_path image_id /bin/bash# -i, --interactive=false 打开STDIN，用于控制台交互 # -t, --tty=false 分配tty设备，该可以支持终端登录，默认为false# -v, --volume=[] 给容器挂载存储卷，挂载到容器的某个目录 # --name=\"nginx-lb\" 为容器指定一个名称# -d 后台启动# -p 指定端口 查看12345docker ps -a# 查看容器列表# -a，查看所有容器包括停止状态的容器 # -l，查看最新创建的容器 # -n=x，查看最后创建的x个容器 12CONTAINER ID| IMAGE| COMMAND| CREATED| STATUS| PORTS| NAMES 容器ID|使用的镜像|运行时的命令|创建时间|运行状态|对外开放的端口|容器名称 123docker imagesdocker image ls# 查看镜像列表 12REPOSITORY|TAG|IMAGE ID|CREATED|SIZE仓库名|标签(版本)|镜像ID|创建时间|大小 启动12docker start 容器名或容器ID # 容器进入运行状态，当容器完成任务后，会自己退出，进入停止状态 终止1docker stop 容器名或容器ID 删除12docker rm 容器名或容器ID# 删除容器,前提要容器没有运行 12docker rm `docker ps -a -q`# 一次性删除所有容器 12docker rmi 镜像名或者镜像ID# 删除镜像 进入12docker attach 容器名或# attach进入容器的活动会话进程 12docker exec -it 容器ID /bin/bash# exec进入容器启动一个新的交互 日志12docker logs 容器名或容器ID# 查看容器里在干什么 12docker top 容器名或容器ID# 查看容器里的进程 加速器12345678$ sudo mkdir -p /etc/docker$ sudo tee /etc/docker/daemon.json &lt;&lt;-'EOF'&#123; \"registry-mirrors\": [\"https://oyukeh0j.mirror.aliyuncs.com\"]&#125;EOF$ sudo /etc/init.d/docker restart 结束End","categories":[],"tags":[{"name":"Docker","slug":"Docker","permalink":"https://mudew.com/tags/Docker/"},{"name":"笔记","slug":"笔记","permalink":"https://mudew.com/tags/%E7%AC%94%E8%AE%B0/"}]},{"title":"Bilibili Android的Sign算法","slug":"Bilibili-Android的Sign算法","date":"2018-03-21T01:08:27.000Z","updated":"2022-01-26T06:44:05.109Z","comments":true,"path":"2018/03/21/bilibili-android-sign-algorithm/","link":"","permalink":"https://mudew.com/2018/03/21/bilibili-android-sign-algorithm/","excerpt":"","text":"前言Bilibili客户端API的Sign验证算法 BiliBilisign的拼接 md5加密( 参数排序(para) + App内置(appsecret) ) 排序按key排序, key1=value1&amp;key2=value2&amp;key3=value3 AppsecretApp内置的私钥,抓包可见 appsecret=ea85624dfcf12d7cc7b2b3a94fac1f2c(栗子) 最后加密前应该是key1=value1&amp;key2=value2&amp;key3=value3ea85624dfcf12d7cc7b2b3a94fac1f2c 附上一个php的栗子12345678910111213/** * $data array * $appSecret string * return string */function createSign($data,)&#123; $appSecret = 'ea85624dfcf12d7cc7b2b3a94fac1f2c'; ksort($data); $url_build = http_build_query($data); return md5(http_build_query($data) . $appSecret); &#125; END.","categories":[],"tags":[{"name":"Bilibili","slug":"Bilibili","permalink":"https://mudew.com/tags/Bilibili/"},{"name":"Sign","slug":"Sign","permalink":"https://mudew.com/tags/Sign/"}]},{"title":"Node&npm笔记","slug":"Node-npm笔记","date":"2018-03-21T01:06:35.000Z","updated":"2022-01-26T06:44:05.109Z","comments":true,"path":"2018/03/21/node-&-npm-notes/","link":"","permalink":"https://mudew.com/2018/03/21/node-&-npm-notes/","excerpt":"","text":"前言记一些Node&amp;Npm使用记录 Node升级以下命令,Linux可能需要权限 npm install -g nn latest 如果windows下面报错,windows版本可以尝试下载官方的msi软件包覆盖安装,也是可行的 Npm升级 npm install -g npm Npm更新更新全局可更新的包 npm update -g 更新package.json可更新的包 npm update 检查npm包的状态 npm-check -u -g 查看哪些包有更新 npm -g outdated 全局安装 npm install -g Nrm的使用安装 npm install -g nrm 使用显示registry可用列表 nrm ls 12345678$ nrm ls* npm ---- https:&#x2F;&#x2F;registry.npmjs.org&#x2F; cnpm --- http:&#x2F;&#x2F;r.cnpmjs.org&#x2F; eu ----- http:&#x2F;&#x2F;registry.npmjs.eu&#x2F; au ----- http:&#x2F;&#x2F;registry.npmjs.org.au&#x2F; sl ----- http:&#x2F;&#x2F;npm.strongloop.com&#x2F; nj ----- https:&#x2F;&#x2F;registry.nodejitsu.com&#x2F; 使用registry nrm use cnpm 123$ nrm use cnpm &gt;&gt;&gt; Registry has been set to: http:&#x2F;&#x2F;r.cnpmjs.org&#x2F; 测试registry的延迟 nrm test END.","categories":[],"tags":[{"name":"Node","slug":"Node","permalink":"https://mudew.com/tags/Node/"},{"name":"Npm","slug":"Npm","permalink":"https://mudew.com/tags/Npm/"}]},{"title":"Laravel5.6入门(六)","slug":"Laravel5-6入门-六","date":"2018-02-23T10:31:43.000Z","updated":"2022-01-26T06:44:05.109Z","comments":true,"path":"2018/02/23/introduction-to-larave5.6-(6)/","link":"","permalink":"https://mudew.com/2018/02/23/introduction-to-larave5.6-(6)/","excerpt":"前言laravel5.6学习记录，学习最新的版本","text":"前言laravel5.6学习记录，学习最新的版本 Laravel文档Laravel 开发工具Phpstorm 开发环境Homestead 中文文档Laravel-China ComposerComposer Laravel5.6 数据库讲了控制器和路由，我们来讲一下数据库. 配置要使用数据库，当然要先配置，才能连上数据库使用.数据库的配置主要有两个地方. .env文件，包涵较多的配置项，当然也包括数据库的信息， config/database.php 里面包括了数据库、数据库驱动、Redis等. 1234567//.envDB_CONNECTION=mysqlDB_HOST=127.0.0.1DB_PORT=3306DB_DATABASE=homesteadDB_USERNAME=homesteadDB_PASSWORD=secret 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172//config/database.php&lt;?phpreturn [ 'default' =&gt; env('DB_CONNECTION', 'mysql'), 'connections' =&gt; [ 'sqlite' =&gt; [ 'driver' =&gt; 'sqlite', 'database' =&gt; env('DB_DATABASE', database_path('database.sqlite')), 'prefix' =&gt; '', ], 'mysql' =&gt; [ 'driver' =&gt; 'mysql', 'host' =&gt; env('DB_HOST', '127.0.0.1'), 'port' =&gt; env('DB_PORT', '3306'), 'database' =&gt; env('DB_DATABASE', 'forge'), 'username' =&gt; env('DB_USERNAME', 'forge'), 'password' =&gt; env('DB_PASSWORD', ''), 'unix_socket' =&gt; env('DB_SOCKET', ''), 'charset' =&gt; 'utf8mb4', 'collation' =&gt; 'utf8mb4_unicode_ci', 'prefix' =&gt; '', 'strict' =&gt; true, 'engine' =&gt; null, ], 'pgsql' =&gt; [ 'driver' =&gt; 'pgsql', 'host' =&gt; env('DB_HOST', '127.0.0.1'), 'port' =&gt; env('DB_PORT', '5432'), 'database' =&gt; env('DB_DATABASE', 'forge'), 'username' =&gt; env('DB_USERNAME', 'forge'), 'password' =&gt; env('DB_PASSWORD', ''), 'charset' =&gt; 'utf8', 'prefix' =&gt; '', 'schema' =&gt; 'public', 'sslmode' =&gt; 'prefer', ], 'sqlsrv' =&gt; [ 'driver' =&gt; 'sqlsrv', 'host' =&gt; env('DB_HOST', 'localhost'), 'port' =&gt; env('DB_PORT', '1433'), 'database' =&gt; env('DB_DATABASE', 'forge'), 'username' =&gt; env('DB_USERNAME', 'forge'), 'password' =&gt; env('DB_PASSWORD', ''), 'charset' =&gt; 'utf8', 'prefix' =&gt; '', ], ], 'migrations' =&gt; 'migrations', 'redis' =&gt; [ 'client' =&gt; 'predis', 'default' =&gt; [ 'host' =&gt; env('REDIS_HOST', '127.0.0.1'), 'password' =&gt; env('REDIS_PASSWORD', null), 'port' =&gt; env('REDIS_PORT', 6379), 'database' =&gt; 0, ], ],]; 配置项都很简单，数据库名、账号、密码、端口设置上就ok.配置文件的可读性很高.database中用的env()函数读取.env文件的配置项. 123'default' =&gt; env('DB_CONNECTION', 'mysql'),//env(),传两个参数，第一个是`.env`里的配置项，第二个是默认值.//如果配置项没有值，就使用设置的默认值. 看你的需求，如果不会更换的就可以写死，也就是写到默认值里，如果频繁更换，或者线下线上的配置区分，就写到.env里，上线只需要改一份配置就好了. .env 在.gitignore中，是属于git忽略文件，也能保证一些安全问题，这里不细说. 修改配置的时候，我们也可以顺便修改下通用配置. 1234567//.envAPP_NAME=LaravelAPP_ENV=localAPP_KEY=base64:****************=APP_DEBUG=trueAPP_URL=http://localhost//名称、环境、是否开启debug(显示一些详细错误信息)、以及域名等. 12345678//我们主要改几个地方,其他的按照自己的需求//上面的配置也在app.php中//config/app.php//时区默认'UTC'改为'PRC' 中国时区'timezone' =&gt; 'PRC',//这是语言，如果有其他语言包，本地化需要.//语言包位于 resources/lang/ 下，默认en'locale' =&gt; 'en', 配置完成,怎么使用呢？ Migrationlaravel下使用migration来创建数据库迁移文件… 123php artisan make:migration create_protables_table//如果需要指定表名，可以使用 --create 和 --table.php artisan make:migration create_protables_table --create=protables 还有我们前面讲模型的时候，-m参数顺便创建的迁移文件.这也算一种迁移文件的创建.1php make:model Protable -m 创建的迁移文件都位于database/migrations 下. 迁移文件里面有up() down()两个方法,up是正向操作,’down’则是反向操作. 我们来添加一些简单的字段. 1234567891011121314151617181920212223242526272829303132333435363738//database/migrations/2018_02_23_112021_create_protables_table.php&lt;?phpuse Illuminate\\Support\\Facades\\Schema;use Illuminate\\Database\\Schema\\Blueprint;use Illuminate\\Database\\Migrations\\Migration;class CreateProtablesTable extends Migration&#123; public function up() &#123; Schema::create('protables', function (Blueprint $table) &#123; //创建一个protables表 $table-&gt;increments('id'); //默认的自增id字段 $table-&gt;string('username'); //string() 相当于varchar $table-&gt;string('phone',100)-&gt;unique(); //带长度的varchar,unique()不重复 $table-&gt;string('password')-&gt;commit('密码'); //commit()是注释 $table-&gt;integer('user_id')-&gt;default(0); //integer() INTEGER //default() 是默认值 $table-&gt;text('content')-&gt;commit('内容'); $table-&gt;timestamps(); //timestamps() 会生成以下两个字段 //`created_at` 创建时间 //`updated_at` 更新时间 &#125;); &#125; public function down() &#123; //dropIfExists()逆向操作，如果存在此表就删除 //最好是加上这句. Schema::dropIfExists('protables'); &#125;&#125; 123456789101112131415&#x2F;&#x2F;常用的字段修饰string() 相当于varchar 第一个参数是字段名，第二个参数可带长度(可选)integer()text() boolean() booleandecimal() double() float() 浮点数increments() 递增主键(unsigned)---&#x2F;&#x2F;字段修饰符-&gt;commit() 注释-&gt;default() 默认值-&gt;unsigned() UNSIGEND-&gt;unique() UNIQUE-&gt;nullable() 可以为null-&gt;charset(&#39;utf8&#39;) 指定编码 迁移文件ok了，然后该生成了. 1php artisan migrate 执行的时候就会执行迁移文件中的up()方法，来创建表. 我们查看下数据库，(图形化还没装),就先用控制台将就看着. 1234| migrations | &#x2F;&#x2F;迁移的记录| password_resets | &#x2F;&#x2F;默认的找回密码表| protables | &#x2F;&#x2F;我们创建的表| users | &#x2F;&#x2F;默认的用户表 看到一句成功创建完成. Migrate错误有时候也不可能顺风顺水，也会报一些错误. 12345[Illuminate\\Database\\QueryException]SQLSTATE[42000]: Syntax error or access violation: 1071 Specified key was too long; max key length is 767 bytes (SQL: alter table users add unique users_email_unique(email))[PDOException]SQLSTATE[42000]: Syntax error or access violation: 1071 Specified key was too long; max key length is 767 bytes laravel5.4后使用的默认编码是utf8mb4,编码区别和数据库版本不同，执行命令的时候，或许会报以上的错误,解决方法也比较简单. 123456789//app\\Providers\\AppServiceProvider.phpuse Illuminate\\Support\\Facades\\Schema; //use这个public function boot()&#123; //在boot方法中添加 Schema::defaultStringLength(191);&#125; 完成后，再次执行migrate命令，应该就ok了 迁移回滚如果麒麟臂过快，不小心就执行了migrate后，不想要了，想要撤回迁移,也有rollback帮我们解决. 1php artisan migrate:rollback 执行的时候就会执行迁移文件中的down(),来删除表. 这就方便的回滚了最近的一次migrate操作，一次操作可能会包含多个迁移文件.如果想限制回滚次数,7次、5次、3次，只需要加上 --step=次数 12php artisan migrate:rollback --step=7//回滚最近7次迁移操作 是不是很Easy，如果你绝望了，放弃了，需要重构了，没关系，一个命令解决你问题. 12php artisan migrate:reset//回滚所有迁移，归零 更新数据表按业务需求，假如后期需要添加逻辑，需要新的字段，也不可能一次次回滚来修改，我们就要来更新数据表了，创建一个新的迁移文件. 需求，添加一个email字段 1php artisan make:migration add_email_to_protables_table 创建了一个迁移文件,2018_02_23_124340_add_email_to_protables_table.php 12345678910public function up()&#123; Schema::table('protables', function (Blueprint $table) &#123; $table-&gt;string('email')-&gt;unique(); &#125;);&#125;public function down()&#123; Schema::dropIfExists('protables');&#125; 这里注意，创建表的时候，是Schema::create，修改表的时候,是Schema::table,第一个参数就是表名,down()里面我们也加上逆向操作需要的,Schema::dropIfExists就是判断并删除表. 执行迁移命令，查看数据表结构. ok啦！Laravel内容丰富、知识也很多， 文章写的可能很杂乱，或许也像抄读文档,见谅.End.","categories":[],"tags":[{"name":"php","slug":"php","permalink":"https://mudew.com/tags/php/"},{"name":"laravel","slug":"laravel","permalink":"https://mudew.com/tags/laravel/"},{"name":"Database","slug":"Database","permalink":"https://mudew.com/tags/Database/"}]},{"title":"Homestead安装phpredis扩展","slug":"Homestead安装phpredis扩展","date":"2018-02-23T05:57:31.000Z","updated":"2022-01-26T06:44:05.109Z","comments":true,"path":"2018/02/23/homestead-installing-the-phpredis-extension/","link":"","permalink":"https://mudew.com/2018/02/23/homestead-installing-the-phpredis-extension/","excerpt":"","text":"前言今天写个demo，用到了Redis,但是报错了Class ‘Redis’ not found ...,使用的是Homestead环境，php没有装redis扩展… phpredis在vagrant ssh中操作,要sudo权限，不然会报错. 1234567$ git clone https://github.com/phpredis/phpredis.git$ cd phpredis //phpize版本要和php版本一致,我这里使用7.2版本.$ /usr/bin/phpize7.2$ ./configure --with-php-config=/usr/bin/php-config7.2//这里边也需要根据情况指定php-config的版本，且和phpize的版本保持一致.$ make &amp;&amp; make install 编译完成会有显示一个扩展所在目录，如果没有的话，就执行. 123$ php -i|grep extension_dir//返回extension_dir =&gt; /usr/lib/php/201***** =&gt; /usr/lib/php/201***** redis.so在modules目录中,把扩展移动到扩展所在目录. 1sudo mv ./modules/redis.so /usr/lib/php/201***** 这些步骤都在phpredis目录操作. 以上完成后,把扩展配置添加到php的配置文件.1234sudo touch /etc/php/7.2/fpm/conf.d/20-redis.ini//vim编辑20-redis.ini//写入 extension=redis.so //:wq 保存 重启php-fpm. 1sudo systemctl restart php7.2-fpm.service ok!一切完成，操作正常完成的话，phpinfo()应该就能看到了. End.","categories":[],"tags":[{"name":"Homestead","slug":"Homestead","permalink":"https://mudew.com/tags/Homestead/"},{"name":"redis","slug":"redis","permalink":"https://mudew.com/tags/redis/"},{"name":"php","slug":"php","permalink":"https://mudew.com/tags/php/"}]},{"title":"Laravel5.6入门(五)","slug":"Laravel5-6入门-五","date":"2018-02-22T13:58:07.000Z","updated":"2022-01-26T06:44:05.109Z","comments":true,"path":"2018/02/22/introduction-to-larave5.6-(v)/","link":"","permalink":"https://mudew.com/2018/02/22/introduction-to-larave5.6-(v)/","excerpt":"前言laravel5.6学习记录，学习最新的版本","text":"前言laravel5.6学习记录，学习最新的版本 Laravel文档Laravel 开发工具Phpstorm 开发环境Homestead 中文文档Laravel-China ComposerComposer Laravel5.6 路由的拓展我们写网站后台，一般都是admin什么的文件夹，来表示后台文件,访问的时候需要加上https://localhost/admin/xxx，路由很方便的解决了这个问题. 123456789//web.phpRoute::prefix('admin')-&gt;group(function ()&#123; Route::get('noone','TrController@noOne'); //get请求 Route::any('notwo','TrController@noTwo')-&gt;name('notwo'); //所有请求，命名路由 Route::match(['get','post'],'nothree/&#123;uid&#125;','TrController@noThree')-&gt;where('uid', '[0-9]+'); //get或者post请求，一个参数，以及正则匹配是否是数字&#125;); 统一的加上了admin前缀，prefix(&#39;前缀&#39;) group()是一个路由组，把一些路由放在一起，添加中间件等等 这里我们在深入一些. 1234//index.blade.php视图名 index.blade.php返回内容&#123;&#123;$uid&#125;&#125;---&#123;&#123;$name&#125;&#125; 视图123456789//web.phpRoute::prefix('admin')-&gt;namespace('Admin')-&gt;group(function () &#123; Route::match(['get', 'post'], 'nothree/&#123;uid&#125;/&#123;name&#125;', 'AucController@noThree') -&gt;where([ 'uid' =&gt; '[0-9]+', 'name' =&gt; '[a-z]+' ]); //get或者post请求，一个参数，以及正则匹配是否是数字&#125;); 路由，prefix设置前缀，namespace是命名空间，如果一个项目有很多控制器，把它们全部放到app\\Http\\Controllers,是不太好，还有一些需求，有相同的控制器名称，可以多分一些子目录，Admin、Home、Article…这个时候namespace就派上用场了 12//artisan创建也是能加目录的php artisan make:controller Admin/AucController 我们可以新建控制器到Admin目录. 123456//AucController.php public function noThree($uid,$name) &#123; //返回一个视图,并传值到视图 return view('studys.index')-&gt;with(compact('uid','name')); &#125; 注意这里的参数接收是按顺序来的，如果换成noThree($name,$uid),那么两个值就uid接的是name、name接的是uid. 我们访问http://laravel.study/admin/nothree/6666/Useri. 还有一点，路由参数的约束，如果每个路由都要约束同样的参数，代码就冗余了，Laravel也帮我们想到了. 1234567//app\\Providers\\RouteServiceProvider.phppublic function boot()&#123; Route::pattern('id', '[0-9]+'); parent::boot();&#125; 在RouteServiceProvider中boot方法添加.这属于全局约束，参数为id的都能被[0-9]+&#39;约束到. End","categories":[],"tags":[{"name":"php","slug":"php","permalink":"https://mudew.com/tags/php/"},{"name":"laravel","slug":"laravel","permalink":"https://mudew.com/tags/laravel/"},{"name":"入门","slug":"入门","permalink":"https://mudew.com/tags/%E5%85%A5%E9%97%A8/"},{"name":"Route","slug":"Route","permalink":"https://mudew.com/tags/Route/"}]},{"title":"Laravel5.6入门(四)","slug":"Laravel5-6入门-四","date":"2018-02-22T12:06:35.000Z","updated":"2022-01-26T06:44:05.109Z","comments":true,"path":"2018/02/22/laravel-5.6-introduction-(iv)/","link":"","permalink":"https://mudew.com/2018/02/22/laravel-5.6-introduction-(iv)/","excerpt":"前言laravel5.6学习记录，学习最新的版本","text":"前言laravel5.6学习记录，学习最新的版本 Laravel文档Laravel 开发工具Phpstorm 开发环境Homestead 中文文档Laravel-China ComposerComposer Laravel5.6 控制器和路由控制器和路由我们都讲了一些，这篇我们结合在一起讲讲.新创建了个普通控制器，TrController来测试.我们先在控制器里创建几个方法，来和路由交互. 123456789101112131415161718192021222324252627//app\\Http\\Controllers\\TrController.php&lt;?phpnamespace App\\Http\\Controllers;use Illuminate\\Http\\Request;class TrController extends Controller&#123; public function noOne() &#123; //普通的返回 return '这是第一个函数'; &#125; public function noTwo() &#123; return '这是第二个函数'; &#125; public function noThree($uid) &#123; //返回一个视图,并传值到视图 return view('studys.index')-&gt;with(compact('uid')); &#125;&#125; 转到路由,我们把前几篇文章的知识点稍微结合一下. 1234567//web.phpRoute::get('/noone','TrController@noOne');//get请求Route::any('/notwo','TrController@noTwo')-&gt;name('notwo');//所有请求，命名路由Route::match(['get','post'],'/nothree/&#123;uid&#125;','TrController@noThree')-&gt;where('uid', '[0-9]+');//get或者post请求，一个参数，以及正则匹配是否是数字 修改下studys.index视图的内容，接收参数.12视图名 index.blade.php返回内容&#123;&#123;$uid&#125;&#125; 我们分别访问测试. noThree($uid)方法接收传来的值，传给视图，Compact,视图方面接收显示. End.","categories":[],"tags":[{"name":"php","slug":"php","permalink":"https://mudew.com/tags/php/"},{"name":"laravel","slug":"laravel","permalink":"https://mudew.com/tags/laravel/"},{"name":"入门","slug":"入门","permalink":"https://mudew.com/tags/%E5%85%A5%E9%97%A8/"},{"name":"Controller","slug":"Controller","permalink":"https://mudew.com/tags/Controller/"},{"name":"Model","slug":"Model","permalink":"https://mudew.com/tags/Model/"}]},{"title":"Laravel5.6入门(三)","slug":"Laravel5-6入门-三","date":"2018-02-22T10:19:07.000Z","updated":"2022-01-26T06:44:05.109Z","comments":true,"path":"2018/02/22/introduction-to-larave5.6-(iii)/","link":"","permalink":"https://mudew.com/2018/02/22/introduction-to-larave5.6-(iii)/","excerpt":"前言laravel5.6学习记录，学习最新的版本.","text":"前言laravel5.6学习记录，学习最新的版本. Laravel文档Laravel 开发工具Phpstorm 开发环境Homestead 中文文档Laravel-China ComposerComposer Laravel5.6 ControllerContrller用来分担路由的工作，路由作为转发，大家啊各行其是… 控制器创建12// * 替换你的控制名称,后缀 Controllerphp artisan make:controller * 这样就表示控制器创建成功,命令会去创建app\\Http\\Controllers\\TestController.php文件，以及写入命名空间和默认继承基类等，都是自动化完成. 12345678910&lt;?phpnamespace App\\Http\\Controllers;use Illuminate\\Http\\Request;class TestController extends Controller&#123; //&#125; 如果要更懒一点，命令加上 --resource 会自动创建一个资源控制器，资源控制器包括了增删改查等方法，可以满足大部分需求. 12// * 替换你的控制名称,后缀 Controllerphp artisan make:controller * --resource 资源控制器创建完成，这和创建普通控制器没有多大区别，只是多了一些常用方法. 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485//app\\Http\\Controllers\\TestzyController.php&lt;?phpnamespace App\\Http\\Controllers;use Illuminate\\Http\\Request;class TestzyController extends Controller&#123; /** * Display a listing of the resource. * * @return \\Illuminate\\Http\\Response */ public function index() &#123; // &#125; /** * Show the form for creating a new resource. * * @return \\Illuminate\\Http\\Response */ public function create() &#123; // &#125; /** * Store a newly created resource in storage. * * @param \\Illuminate\\Http\\Request $request * @return \\Illuminate\\Http\\Response */ public function store(Request $request) &#123; // &#125; /** * Display the specified resource. * * @param int $id * @return \\Illuminate\\Http\\Response */ public function show($id) &#123; // &#125; /** * Show the form for editing the specified resource. * * @param int $id * @return \\Illuminate\\Http\\Response */ public function edit($id) &#123; // &#125; /** * Update the specified resource in storage. * * @param \\Illuminate\\Http\\Request $request * @param int $id * @return \\Illuminate\\Http\\Response */ public function update(Request $request, $id) &#123; // &#125; /** * Remove the specified resource from storage. * * @param int $id * @return \\Illuminate\\Http\\Response */ public function destroy($id) &#123; // &#125;&#125; 我们可以TestzyController把添加到路由中. 12//web.phpRoute::Resource('testzy', 'TestzyController'); 再查看一下系统的路由信息. 可以看到各个方法对应的URL,请求方式，路由名称等信息,都是一一对应的， 这是按照RESTful Api 设计生成的格式，get是从服务器取资源、post是新建资源、put是更新完整资源、patch更新部分资源、delete是删除资源. 资源控制器的路由命名添加了资源控制器到路由着中，命名方式不再是-&gt;name(&#39;&#39;)的方式. 1234567Route::Resource('testzy', 'TestzyController', ['names' =&gt; [ 'index' =&gt; 'indexahhh', 'create' =&gt; 'createahhh' ]]);//是第三个参数,传一个二维数组 此时路由信息，我们修改成功 控制器讲到这里，下面也说下创建模型. ModelModel是来和数据库打交道的 创建模型123// 创建一个新的 Eloquent 模型类// 我习惯把模型放到Models里php artisan make:model Models/Test 创建成功. 1234567891011//app\\Models\\Test.php&lt;?phpnamespace App\\Models;use Illuminate\\Database\\Eloquent\\Model;class Test extends Model&#123; //&#125; 同样的，命令把文件和命名空间、继承等都弄好了. 模型对应的数据库迁移文件可以自己创建，当然也可以在创建模型的时候一起创建，只需要加上 -m就ok. 如果加上-rmc,会自动创建Model、资源控制器、迁移文件，懒人必备 123// 创建一个新的 Eloquent 模型类// 我习惯把模型放到Models里php artisan make:model Models/Testzy -m 会生成几个文件. 123//一个Model，一个迁移文件app\\Models\\Testzy.phpdatabase\\migrations\\2018_02_22_113638_create_testzies_table.php End.","categories":[],"tags":[{"name":"php","slug":"php","permalink":"https://mudew.com/tags/php/"},{"name":"laravel","slug":"laravel","permalink":"https://mudew.com/tags/laravel/"},{"name":"入门","slug":"入门","permalink":"https://mudew.com/tags/%E5%85%A5%E9%97%A8/"},{"name":"Artisan","slug":"Artisan","permalink":"https://mudew.com/tags/Artisan/"}]},{"title":"Laravel5.6入门(二)","slug":"Laravel5-6入门-二","date":"2018-02-22T08:11:51.000Z","updated":"2022-01-26T06:44:05.109Z","comments":true,"path":"2018/02/22/laravel-5.6-introduction-(ii)/","link":"","permalink":"https://mudew.com/2018/02/22/laravel-5.6-introduction-(ii)/","excerpt":"前言laravel5.6学习记录，学习最新的版本.","text":"前言laravel5.6学习记录，学习最新的版本. Laravel文档Laravel 开发工具Phpstorm 开发环境Homestead 中文文档Laravel-China ComposerComposer Laravel5.6 路由Route就是根据Url分配不同的处理程序. 我们可以使用1php artisan route:list查看程序默认的路由信息. 首页/路由的处理是一个Closure闭包函数. 1234//route/web.phpRoute::get('/', function () &#123; return view('welcome');&#125;); get()是请求方式,/代表首页,welcome是视图文件,view(&#39;视图目录.视图文件名&#39;) 目录以.连接,视图文件名不需要.blade.php后缀函数可以直接定位到视图目录 Resources/views/*中. 请求方式有: 123456Route::get($uri, $callback); //取Route::post($uri, $callback); //新建Route::put($uri, $callback); //更新完整Route::patch($uri, $callback); //更新部分Route::delete($uri, $callback); //删除Route::options($uri, $callback); 我们可以新建一个路由和视图测试. get请求/study,返回views/study/index.blade.php视图 访问http://laravel.study/study 我们可以再次查看一下路由信息 这样就完成了一个非常简单的路由，把视图和路由关联在一起了 路由和控制器绑定因为还没讲到控制器，所以就代码示例，把闭包函数部分替换成控制器@方法即可 12Route::get('user/profile', 'UserController@index');//UserController 控制器名 @ index 函数 常用请求方式12345678910111213141516Route::get('foo', function () &#123; // 基本方式 //TODO&#125;);Route::post('foo', function () &#123; // 基本方式 //TODO&#125;);Route::match(['get', 'post'], '/', function () &#123; // 基本方式，匹配get和post //TODO&#125;);Route::any('foo', function () &#123; // 基本方式，所有请求方式 //TODO&#125;); 路由参数 必填参数 可选参数1234Route::get('user/&#123;name?&#125;', function ($name = 'John') &#123; return $name;&#125;);//可选参数使用?号标记，但是一定要有个默认值 路由正则正则匹配可以使用链式操作-&gt;where(&#39;参数名&#39;,&#39;正则&#39;) 123Route::get('user/&#123;name&#125;', function ($name) &#123; //&#125;)-&gt;where('name', '[A-Za-z]+'); 路由命名路由命名也可以使用链式操作-&gt;name(&#39;别名&#39;),或者使用Route::name(&#39;别名&#39;) 123456789Route::get('user/profile', function () &#123; //&#125;)-&gt;name('profile');Route::get('user/profile', 'UserController@showProfile')-&gt;name('profile');//第二种Route::name('profile')-&gt;get('user/profile', function () &#123; //&#125;); 路由命名主要使用在 route(&#39;路由名&#39;)函数 1234// 生成 URL...$url = route('profile');// 生成重定向...return redirect()-&gt;route('profile'); 路由这块姿势很多，更复杂的用到的时候再说 End.","categories":[],"tags":[{"name":"php","slug":"php","permalink":"https://mudew.com/tags/php/"},{"name":"laravel","slug":"laravel","permalink":"https://mudew.com/tags/laravel/"},{"name":"入门","slug":"入门","permalink":"https://mudew.com/tags/%E5%85%A5%E9%97%A8/"}]},{"title":"Laravel5.6入门(一)","slug":"Laravel5.6入门-一","date":"2018-02-22T06:47:22.000Z","updated":"2022-01-26T06:44:05.109Z","comments":true,"path":"2018/02/22/introduction-to-larave5.6-(i)/","link":"","permalink":"https://mudew.com/2018/02/22/introduction-to-larave5.6-(i)/","excerpt":"前言laravel5.6学习记录，学习最新的版本","text":"前言laravel5.6学习记录，学习最新的版本 Laravel文档Laravel 开发工具Phpstorm 开发环境Homestead 中文文档Laravel-China ComposerComposer Laravel5.6 安装Laravel有很多种安装方式,官方文档介绍两种 第一种是直接使用 composer create-project 创建Laravel项目,也是我主要使用的方式 1composer create-project --prefer-dist laravel/laravel laravel-study (可选)如果要指定版本，laravel/laravel=版本号 第二种方式是使用 laravel 的安装器； 下载Laravel安装器 确保 $HOME/.composer/vendor/bin 目录（或你的操作系统的等效目录）已经放在你的环境变量 $PATH 中，以便系统可以找到 laravel 的可执行文件。 1composer global require \"laravel/installer\" 然后就能直接new新项目了 1laravel new laravel-study 这里使用的是homestead，安装 看到set successfully.，就完成了 可以设置一些权限12sudo chmod -R 777 storagesudo chmod -R 755 public 因为本地开发可以适当给高一点 目录结构 安装完成，导入phpstorm App 目录包含了应用的核心代码，大部分代码编写都在里面. Http/Controllers 控制器目录. Http/Middleware 中间件目录. Bootstrap 框架的自动载入和缓存等文件. Config 所有的配置文件. Database 关于数据库的迁移和填充文件. Public 程序入口以及一些静态文件. index.php 程序入口 Resources 视图、前端资源、语言包等 Views 模板视图目录 Routes 路由目录 web.php 常用 Vendor 通过Composer加载的依赖 .env 一些秘钥，账号配置 只简洁的说了几个常用的，如果需要详细了解，可以看目录结构 配置好Homestead，设置域名，重启加载配置 123456&#x2F;&#x2F;hosts192.168.10.10 laravel.study&#x2F;&#x2F;Homestead.yamlsites: - map: laravel.study to: &#x2F;home&#x2F;vagrant&#x2F;code&#x2F;laravel-study&#x2F;public 就能访问 http://laravel.study/查看 End.","categories":[],"tags":[{"name":"php","slug":"php","permalink":"https://mudew.com/tags/php/"},{"name":"laravel","slug":"laravel","permalink":"https://mudew.com/tags/laravel/"},{"name":"入门","slug":"入门","permalink":"https://mudew.com/tags/%E5%85%A5%E9%97%A8/"}]},{"title":"phpstorm-setting remarks","slug":"phpstorm-setting-remarks","date":"2018-02-22T05:12:31.000Z","updated":"2022-01-26T06:44:05.109Z","comments":true,"path":"2018/02/22/phpstorm-setting-remarks/","link":"","permalink":"https://mudew.com/2018/02/22/phpstorm-setting-remarks/","excerpt":"前言记录一些phpstorm的小设置，持续更新","text":"前言记录一些phpstorm的小设置，持续更新 设置开启时选择项目 关掉选项 END.","categories":[],"tags":[{"name":"PHPSTORM","slug":"PHPSTORM","permalink":"https://mudew.com/tags/PHPSTORM/"}]},{"title":"phpstorm-替换内置terminal","slug":"phpstorm-替换内置terminal","date":"2018-02-21T14:44:07.000Z","updated":"2022-01-26T06:44:05.109Z","comments":true,"path":"2018/02/21/phpstorm---replace-built-in-terminal/","link":"","permalink":"https://mudew.com/2018/02/21/phpstorm---replace-built-in-terminal/","excerpt":"前言环境是win+phpstorm，Phpstorm重新配置，顺便记一些修改的配置，以备日后参考。phpstorm默认控制台是cmd，不太好看，换成自己喜欢的Cmder or Git bash…","text":"前言环境是win+phpstorm，Phpstorm重新配置，顺便记一些修改的配置，以备日后参考。phpstorm默认控制台是cmd，不太好看，换成自己喜欢的Cmder or Git bash… 替换cmder cmder是windows下非常好用的控制台 添加CMDER_ROOT到系统变量 变量值是cmder根目录 设置phpstorm-&gt;Tools-&gt;terminal-&gt;Shell Path1234//正常\"cmd.exe\" /k \"%CMDER_ROOT%\\vendor\\init.bat\"//有空格的\"cmd.exe\" /k \"\"%CMDER_ROOT%\\vendor\\init.bat\"\" 外面套的多一层双引号是因为我的路径里面有空格,然后应用,Alt+F12呼出Terminal看看效果。 反正比cmd好看就对了 (可选)设置console字体样式 替换Git Bash 设置phpstorm-&gt;Tools-&gt;terminal-&gt;Shell Path 步骤其实是一样的，只是参数不一样，就不上效果图了 1\"Git的安装路径\\bin\\sh.exe\" -login -i END.","categories":[],"tags":[{"name":"PHPSTORM","slug":"PHPSTORM","permalink":"https://mudew.com/tags/PHPSTORM/"}]}]}